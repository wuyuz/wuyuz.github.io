<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>包&amp;module | 独角兕大王</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.ccac5a78.css" as="style"><link rel="preload" href="/assets/js/app.51f2f156.js" as="script"><link rel="preload" href="/assets/js/2.8911ec45.js" as="script"><link rel="preload" href="/assets/js/13.abf127cd.js" as="script"><link rel="prefetch" href="/assets/js/10.6948c28b.js"><link rel="prefetch" href="/assets/js/100.276864ee.js"><link rel="prefetch" href="/assets/js/101.447ab1c7.js"><link rel="prefetch" href="/assets/js/102.f5b3c71d.js"><link rel="prefetch" href="/assets/js/103.16474d4b.js"><link rel="prefetch" href="/assets/js/104.ed58aef3.js"><link rel="prefetch" href="/assets/js/105.045203cd.js"><link rel="prefetch" href="/assets/js/106.be359e0b.js"><link rel="prefetch" href="/assets/js/107.7331bbca.js"><link rel="prefetch" href="/assets/js/108.76e1c800.js"><link rel="prefetch" href="/assets/js/109.e82166f3.js"><link rel="prefetch" href="/assets/js/11.d4ec37c8.js"><link rel="prefetch" href="/assets/js/110.4144755a.js"><link rel="prefetch" href="/assets/js/111.5864ab53.js"><link rel="prefetch" href="/assets/js/112.ca2aee84.js"><link rel="prefetch" href="/assets/js/113.641e7765.js"><link rel="prefetch" href="/assets/js/114.d69f8545.js"><link rel="prefetch" href="/assets/js/115.1b6a9f89.js"><link rel="prefetch" href="/assets/js/116.dde2c44e.js"><link rel="prefetch" href="/assets/js/117.4e79498c.js"><link rel="prefetch" href="/assets/js/12.7aac9c8d.js"><link rel="prefetch" href="/assets/js/14.aa4413a7.js"><link rel="prefetch" href="/assets/js/15.11a64e5b.js"><link rel="prefetch" href="/assets/js/16.f2d9a882.js"><link rel="prefetch" href="/assets/js/17.11c5bb7f.js"><link rel="prefetch" href="/assets/js/18.a522877b.js"><link rel="prefetch" href="/assets/js/19.6f31a972.js"><link rel="prefetch" href="/assets/js/20.b546c54e.js"><link rel="prefetch" href="/assets/js/21.6d055b7f.js"><link rel="prefetch" href="/assets/js/22.c48feceb.js"><link rel="prefetch" href="/assets/js/23.69941f78.js"><link rel="prefetch" href="/assets/js/24.6126dfc2.js"><link rel="prefetch" href="/assets/js/25.3475449c.js"><link rel="prefetch" href="/assets/js/26.96bb4643.js"><link rel="prefetch" href="/assets/js/27.da610e5d.js"><link rel="prefetch" href="/assets/js/28.b24ec15c.js"><link rel="prefetch" href="/assets/js/29.ec8af553.js"><link rel="prefetch" href="/assets/js/3.bec5f768.js"><link rel="prefetch" href="/assets/js/30.2e780db1.js"><link rel="prefetch" href="/assets/js/31.464c36ed.js"><link rel="prefetch" href="/assets/js/32.ad7d37c2.js"><link rel="prefetch" href="/assets/js/33.722f1ec5.js"><link rel="prefetch" href="/assets/js/34.8448d0fd.js"><link rel="prefetch" href="/assets/js/35.e5168ac9.js"><link rel="prefetch" href="/assets/js/36.edc404f1.js"><link rel="prefetch" href="/assets/js/37.5807602e.js"><link rel="prefetch" href="/assets/js/38.a519c89a.js"><link rel="prefetch" href="/assets/js/39.89af1b9a.js"><link rel="prefetch" href="/assets/js/4.5ed19beb.js"><link rel="prefetch" href="/assets/js/40.6c653db9.js"><link rel="prefetch" href="/assets/js/41.bc3b8b69.js"><link rel="prefetch" href="/assets/js/42.a0a02d9b.js"><link rel="prefetch" href="/assets/js/43.62f344e3.js"><link rel="prefetch" href="/assets/js/44.a7fd9d68.js"><link rel="prefetch" href="/assets/js/45.729c1c39.js"><link rel="prefetch" href="/assets/js/46.5b924aea.js"><link rel="prefetch" href="/assets/js/47.f3990404.js"><link rel="prefetch" href="/assets/js/48.f591f360.js"><link rel="prefetch" href="/assets/js/49.f7f213ad.js"><link rel="prefetch" href="/assets/js/5.2c5d28b5.js"><link rel="prefetch" href="/assets/js/50.b9ca2762.js"><link rel="prefetch" href="/assets/js/51.93672ee6.js"><link rel="prefetch" href="/assets/js/52.fb21314a.js"><link rel="prefetch" href="/assets/js/53.65343ccc.js"><link rel="prefetch" href="/assets/js/54.8081227d.js"><link rel="prefetch" href="/assets/js/55.e207659e.js"><link rel="prefetch" href="/assets/js/56.bde381df.js"><link rel="prefetch" href="/assets/js/57.f8eceb45.js"><link rel="prefetch" href="/assets/js/58.bef70bfd.js"><link rel="prefetch" href="/assets/js/59.7ab7562d.js"><link rel="prefetch" href="/assets/js/6.fc65a1ac.js"><link rel="prefetch" href="/assets/js/60.f40ac3ca.js"><link rel="prefetch" href="/assets/js/61.d2b463ab.js"><link rel="prefetch" href="/assets/js/62.cfdf1bcf.js"><link rel="prefetch" href="/assets/js/63.1e45ce59.js"><link rel="prefetch" href="/assets/js/64.a98fe86e.js"><link rel="prefetch" href="/assets/js/65.0234d7c5.js"><link rel="prefetch" href="/assets/js/66.724906f0.js"><link rel="prefetch" href="/assets/js/67.7806fda6.js"><link rel="prefetch" href="/assets/js/68.9f227dae.js"><link rel="prefetch" href="/assets/js/69.fdbc56ac.js"><link rel="prefetch" href="/assets/js/7.284de54e.js"><link rel="prefetch" href="/assets/js/70.04a9cc03.js"><link rel="prefetch" href="/assets/js/71.a6fa1dd9.js"><link rel="prefetch" href="/assets/js/72.2f8e3aa0.js"><link rel="prefetch" href="/assets/js/73.9bbb0cb6.js"><link rel="prefetch" href="/assets/js/74.9f122255.js"><link rel="prefetch" href="/assets/js/75.75e1fbd8.js"><link rel="prefetch" href="/assets/js/76.60ff3c3e.js"><link rel="prefetch" href="/assets/js/77.39a253ae.js"><link rel="prefetch" href="/assets/js/78.0e49712f.js"><link rel="prefetch" href="/assets/js/79.5f9c24a0.js"><link rel="prefetch" href="/assets/js/8.5c21a4cc.js"><link rel="prefetch" href="/assets/js/80.f826f188.js"><link rel="prefetch" href="/assets/js/81.b8995ea7.js"><link rel="prefetch" href="/assets/js/82.e9bf63e0.js"><link rel="prefetch" href="/assets/js/83.e3a00749.js"><link rel="prefetch" href="/assets/js/84.b940927c.js"><link rel="prefetch" href="/assets/js/85.ad46a9b2.js"><link rel="prefetch" href="/assets/js/86.190e0071.js"><link rel="prefetch" href="/assets/js/87.5f9eb9ef.js"><link rel="prefetch" href="/assets/js/88.cfaf7469.js"><link rel="prefetch" href="/assets/js/89.e64cc32c.js"><link rel="prefetch" href="/assets/js/9.0723805d.js"><link rel="prefetch" href="/assets/js/90.805edabe.js"><link rel="prefetch" href="/assets/js/91.6a1ab3f7.js"><link rel="prefetch" href="/assets/js/92.04ecd01e.js"><link rel="prefetch" href="/assets/js/93.e615470a.js"><link rel="prefetch" href="/assets/js/94.0ad7c41c.js"><link rel="prefetch" href="/assets/js/95.0e5ce618.js"><link rel="prefetch" href="/assets/js/96.b59cf9f4.js"><link rel="prefetch" href="/assets/js/97.2a327746.js"><link rel="prefetch" href="/assets/js/98.9c01ec88.js"><link rel="prefetch" href="/assets/js/99.952046bd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ccac5a78.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://github.com/fluidicon.png" alt="独角兕大王" class="logo"> <span class="site-name can-hide">独角兕大王</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/python/" class="nav-link">
  Python
</a></div><div class="nav-item"><a href="/rust/" class="nav-link">
  Rust
</a></div><div class="nav-item"><a href="/go/" class="nav-link router-link-active">
  Go
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/lua/" class="nav-link">
  Lua
</a></div><div class="nav-item"><a href="/C/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="https://github.com/wuyuz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/double-W/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cnblogs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/python/" class="nav-link">
  Python
</a></div><div class="nav-item"><a href="/rust/" class="nav-link">
  Rust
</a></div><div class="nav-item"><a href="/go/" class="nav-link router-link-active">
  Go
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/lua/" class="nav-link">
  Lua
</a></div><div class="nav-item"><a href="/C/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="https://github.com/wuyuz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/double-W/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cnblogs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go常用模块</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Go基础知识</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/origin/变量和常量.html" class="sidebar-link">变量和常量</a></li><li><a href="/go/origin/数据类型.html" class="sidebar-link">数据类型</a></li><li><a href="/go/origin/流程控制.html" class="sidebar-link">流程控制</a></li><li><a href="/go/origin/数组&amp;切片.html" class="sidebar-link">数组&amp;切片&amp;map&amp;channel</a></li><li><a href="/go/origin/函数.html" class="sidebar-link">函数</a></li><li><a href="/go/origin/指针.html" class="sidebar-link">指针</a></li><li><a href="/go/origin/结构体.html" class="sidebar-link">结构体</a></li><li><a href="/go/origin/包.html" class="active sidebar-link">包&amp;module</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/go/origin/包.html#包-module" class="sidebar-link">包&amp;module</a></li><li class="sidebar-sub-header"><a href="/go/origin/包.html#go语言的包-package" class="sidebar-link">Go语言的包（package）</a></li><li class="sidebar-sub-header"><a href="/go/origin/包.html#包的导入" class="sidebar-link">包的导入</a></li><li class="sidebar-sub-header"><a href="/go/origin/包.html#自定义包名" class="sidebar-link">自定义包名</a></li><li class="sidebar-sub-header"><a href="/go/origin/包.html#init-初始化函数" class="sidebar-link">init()初始化函数</a></li><li class="sidebar-sub-header"><a href="/go/origin/包.html#go-module" class="sidebar-link">Go module</a></li><li class="sidebar-sub-header"><a href="/go/origin/包.html#go-mod命令" class="sidebar-link">Go mod命令</a></li></ul></li><li><a href="/go/origin/接口.html" class="sidebar-link">接口</a></li><li><a href="/go/origin/反射.html" class="sidebar-link">反射</a></li><li><a href="/go/origin/并发编程.html" class="sidebar-link">并发编程</a></li><li><a href="/go/origin/网络编程.html" class="sidebar-link">网络编程</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go应用实例</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go源码解析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go微服务网关</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="包-module"><a href="#包-module" class="header-anchor">#</a> 包&amp;module</h2> <p>在工程化的Go语言开发项目中，Go语言的源码复用是建立在包（package）基础之上的。本文介绍了Go语言中如何定义包、如何导出包的内容及如何导入其他包。</p> <h2 id="go语言的包-package"><a href="#go语言的包-package" class="header-anchor">#</a> Go语言的包（package）</h2> <p><code>包（package）</code>是多个Go源码的集合，是一种高级的代码复用方案，Go语言为我们提供了很多内置包，如<code>fmt</code>、<code>os</code>、<code>io</code>等。</p> <h4 id="定义包"><a href="#定义包" class="header-anchor">#</a> 定义包</h4> <p>我们还可以根据自己的需要创建自己的包。一个包可以简单理解为一个存放<code>.go</code>文件的文件夹。 该文件夹下面的所有go文件都要在代码的第一行添加如下代码，声明该文件归属的包。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> 包名
</code></pre></div><p>注意事项：</p> <ul><li>一个文件夹下面直接包含的文件只能归属一个<code>package</code>，同样一个<code>package</code>的文件不能在多个文件夹下。</li> <li>包名可以不和文件夹的名字一样，包名不能包含 <code>-</code> 符号。</li> <li>包名为<code>main</code>的包为应用程序的入口包，这种包编译后会得到一个可执行文件，而编译不包含<code>main</code>包的源代码则不会得到可执行文件。</li></ul> <h4 id="可见性"><a href="#可见性" class="header-anchor">#</a> 可见性</h4> <p>如果想在一个包中引用另外一个包里的标识符（如变量、常量、类型、函数等）时，该标识符必须是对外可见的（public）。在Go语言中只需要将标识符的首字母大写就可以让标识符对外可见了。</p> <p>举个例子， 我们定义一个包名为<code>pkg2</code>的包，代码如下：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> pkg2

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 包变量可见性</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">// 首字母小写，外部包不可见，只能在当前包内使用</span>

<span class="token comment">// 首字母大写外部包可见，可在其他包中使用</span>
<span class="token keyword">const</span> Mode <span class="token operator">=</span> <span class="token number">1</span>

<span class="token keyword">type</span> person <span class="token keyword">struct</span> <span class="token punctuation">{</span> <span class="token comment">// 首字母小写，外部包不可见，只能在当前包内使用</span>
	name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 首字母大写，外部包可见，可在其他包中使用</span>
<span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 首字母小写，外部包不可见，只能在当前包内使用</span>
	<span class="token keyword">var</span> Age <span class="token operator">=</span> <span class="token number">18</span> <span class="token comment">// 函数局部变量，外部包不可见，只能在当前函数内使用</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>Age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>结构体中的字段名和接口中的方法名如果首字母都是大写，外部包可以访问这些字段和方法。例如：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name  <span class="token builtin">string</span> <span class="token comment">//可在包外访问的方法</span>
	class <span class="token builtin">string</span> <span class="token comment">//仅限包内访问的字段</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Payer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//仅限包内访问的方法</span>
	<span class="token function">Pay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//可在包外访问的方法</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="包的导入"><a href="#包的导入" class="header-anchor">#</a> 包的导入</h2> <p>要在代码中引用其他包的内容，需要使用<code>import</code>关键字导入使用的包。具体语法如下:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;包的路径&quot;</span>
</code></pre></div><p>注意事项：</p> <ul><li>import导入语句通常放在文件开头包声明语句的下面。</li> <li>导入的包名需要使用双引号包裹起来。</li> <li>包名是从<code>$GOPATH/src/</code>后开始计算的，使用<code>/</code>进行路径分隔。</li> <li>Go语言中禁止循环导入包</li></ul> <h4 id="单行导入"><a href="#单行导入" class="header-anchor">#</a> 单行导入</h4> <p>单行导入的格式如下：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;包1&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;包2&quot;</span>
</code></pre></div><h4 id="多行导入"><a href="#多行导入" class="header-anchor">#</a> 多行导入</h4> <p>多行导入的格式如下：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;包1&quot;</span>
    <span class="token string">&quot;包2&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="自定义包名"><a href="#自定义包名" class="header-anchor">#</a> 自定义包名</h2> <p>在导入包名的时候，我们还可以为导入的包设置别名。通常用于导入的包名太长或者导入的包名冲突的情况。具体语法格式如下：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> 别名 <span class="token string">&quot;包的路径&quot;</span>
</code></pre></div><p>单行导入方式定义别名：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> m <span class="token string">&quot;github.com/Q1mi/studygo/pkg_test&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>Mode<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>多行导入方式定义别名：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    m <span class="token string">&quot;github.com/Q1mi/studygo/pkg_test&quot;</span>
 <span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>Mode<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="init-初始化函数"><a href="#init-初始化函数" class="header-anchor">#</a> init()初始化函数</h2> <p>在Go语言程序执行时导入包语句会自动触发包内部<code>init()</code>函数的调用。需要注意的是： <code>init()</code>函数没有参数也没有返回值。 <code>init()</code>函数在程序运行时自动被调用执行，不能在代码中主动调用它。</p> <p>包初始化执行的顺序如下图所示：</p> <p><img src="https://www.liwenzhou.com/images/Go/package/init01.png" alt=""></p> <h4 id="init-函数执行顺序"><a href="#init-函数执行顺序" class="header-anchor">#</a> init()函数执行顺序</h4> <p>Go语言包会从<code>main</code>包开始检查其导入的所有包，每个包中又可能导入了其他的包。Go编译器由此构建出一个树状的包引用关系，再根据引用顺序决定编译顺序，依次编译这些包的代码。</p> <p>在运行时，被最后导入的包会最先初始化并调用其<code>init()</code>函数， 如下图示：<img src="https://www.liwenzhou.com/images/Go/package/init02.png" alt="包之间的init()执行顺序"></p> <h2 id="go-module"><a href="#go-module" class="header-anchor">#</a> Go module</h2> <p><code>Go1.1.1</code>版本发布(2018-08-24发布)已经过去几天，从官方的博客中看到，有两个比较突出的特色，一个就是今天讲的<code>module</code>，模块概念。目前该功能还在试验阶段，有些地方还需要不断的进行完善。在官方正式宣布之前，打算不断修正这种支持。到时候就可以移除对<code>GOPATH</code>和<code>go get</code>命令的支持。
如果你想现在想就试试这个新功能<code>module</code>，需要你将你的代码仓库放到<code>GOPATH/src</code>目录之外。然后在那个目录下创建一个<code>go.mod</code>文件，从文件树中运行<code>go</code>命令。</p> <h3 id="主要概念介绍"><a href="#主要概念介绍" class="header-anchor">#</a> 主要概念介绍</h3> <p><code>module</code>是一个相关<code>Go</code>包的集合，它是源代码更替和版本控制的单元。模块由源文件形成的<code>go.mod</code>文件的根目录定义，包含<code>go.mod</code>文件的目录也被称为模块根。<code>moudles</code>取代旧的的基于<code>GOPATH</code>方法来指定在工程中使用哪些源文件或导入包。模块路径是导入包的路径前缀，<code>go.mod</code>文件定义模块路径，并且列出了在项目构建过程中使用的特定版本。</p> <h4 id="go-mod文件"><a href="#go-mod文件" class="header-anchor">#</a> go.mod文件</h4> <p><code>go.mod</code>文件定义<code>module</code>路径以及列出其他需要在<code>build</code>时引入的模块的特定的版本。例如下面的例子中，<code>go.mod</code>声明<code>example.com/m</code>路径时<code>module</code>的根目录，同时也声明了<code>module</code>依赖特定版本的<code>golang.org/x/text</code>和<code>gopkg.in/yaml.v2</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>module example.com/m

require (
    golang.org/x/text v0.3.0
    gopkg.in/yaml.v2  v2.1.0
)
123456
</code></pre></div><p><code>go.mod</code>文件还可以指定要替换和排除的版本，命令行会自动根据<code>go.mod</code>文件来维护需求声明中的版本。如果想获取更多的有关<code>go.mod</code>文件的介绍，可以使用命令<code>go help go.mod</code>。
<code>go.mod</code>文件用<code>//</code>注释，而不用<code>/**/</code>。文件的每行都有一条指令，由一个动作加上参数组成。例如：</p> <div class="language- extra-class"><pre class="language-text"><code>odule my/thing
require other/thing 	v1.0.2
require new/thing 		v2.3.4
exclude old/thing 		v1.2.3
replace bad/thing 		v1.4.5 	=&gt; good/thing v1.4.5
</code></pre></div><p>上面三个动词<code>require</code>、<code>exclude</code>、<code>replace</code>分别表示：项目需要的依赖包及版本、排除某些包的特别版本、取代当前项目中的某些依赖包。
相同动作的命令可以放到一个动词+括号组成的结构中，例如：</p> <div class="language- extra-class"><pre class="language-text"><code>require (
    new/thing v2.3.4
    old/thing v1.2.3
)

</code></pre></div><h4 id="其他命令的支持"><a href="#其他命令的支持" class="header-anchor">#</a> 其他命令的支持</h4> <p>旧的版本，构建编译命令<code>go build</code>中的参数没有<code>-mod</code>参数，最新的版本现在多了这个，用来对<code>go.mod</code>文件进行更新或其他使用控制。形式如：<code>go build -mod [mode]</code>，其中mode有以下几种取值：<code>readonly</code>，<code>release</code>，<code>vendor</code>。当执行<code>go build -mod=vendor</code>的时候，会在生成可执行文件的同时将项目的依赖包放到主模块的<code>vendo</code>r目录下。
<code>go get -m [packages]</code>会将下载的依赖包放到<code>GOPATH/pkg/mod</code>目录下，并且将依赖写入到<code>go.mod</code>文件。<code>go get -u=patch</code>会更新主模块下的所有依赖包。
如果遇到不熟悉的导入包，任何可以查找包含该引入包模块的<code>go</code>命令，都会自动将该模块的最新版本添加到<code>go.mod</code>文件中。同时也会添加缺失的模块，以及删除无用的<code>module</code>。例如：<code>go build</code>, <code>go test</code>或者<code>go list</code>命令。另外，有一个专门的命令<code>go mod tidy</code>，用来查看和添加缺失的<code>module</code>需求声明以及移除不必要的。
<code>go.mod</code>文件是可读，也是可编辑的。<code>go</code>命令行会自动更新<code>go.mod</code>文件来维持一个标准格式以及精确的引入声明。</p> <h2 id="go-mod命令"><a href="#go-mod命令" class="header-anchor">#</a> Go mod命令</h2> <p><code>Go mod</code>提供了一系列操作<code>modules</code>的命令，记住，所有的<code>go</code>命令中现在已经内置了对<code>module</code>的支持，而不仅仅是<code>go mod</code>命令。例如使用<code>go get</code>时，会经常自动在后台添加、移除、升级、降级依赖包版本。
命令语法：<code>go mod [arguments]</code>。<code>Go mod</code>提供的命令有下面几个，对于比较常用的命令进行详细说明。</p> <div class="language-go extra-class"><pre class="language-go"><code>download                <span class="token comment">//下载模块到本地缓存，具体可以通过命令go env查看，其中环境变量GOCACHE就是缓存的地址，如果该文件夹的内容太大，可以通过命令go clean -cache</span>
edit                    <span class="token comment">//从工具或脚本中编辑go.mod文件</span>
graph                   <span class="token comment">//打印模块需求图</span>
init                    <span class="token comment">//在当前目录下初始化新的模块</span>
tidy                    <span class="token comment">//添加缺失的模块以及移除无用的模块</span>
verify                  <span class="token comment">//验证依赖项是否达到预期的目的</span>
why                     <span class="token comment">//解释为什么需要包或模块</span>
</code></pre></div><h4 id="环境变量-go111module"><a href="#环境变量-go111module" class="header-anchor">#</a> 环境变量——GO111MODULE</h4> <p><code>Go 1.11中</code>的<code>module</code>支持临时环境变量——<code>GO111MODULE</code>，它可以设置以下三个值：<code>off</code>,<code>on</code>或者<code>auto</code>(默认)。</p> <ul><li>如果<code>GO111MODULE=off</code>，那么<code>go</code>命令行将不会使用新的<code>module</code>功能，相反的，它将会在<code>vendor</code>目录下和<code>GOPATH</code>目录中查找依赖包。也把这种模式叫<code>GOPATH模式</code>。</li> <li>如果<code>GO111MODULE=on</code>，那么<code>go</code>命令行就会使用<code>modules</code>功能，而不会访问<code>GOPATH</code>。也把这种模式称作<code>module-aware</code>模式，这种模式下，<code>GOPATH</code>不再在<code>build</code>时扮演导入的角色，但是尽管如此，它还是承担着存储下载依赖包的角色。它会将依赖包放在<code>GOPATH/pkg/mod</code>目录下。</li> <li>如果<code>GO111MODULE=auto</code>，这种模式是默认的模式，也就是说在你不设置的情况下，就是<code>auto</code>。这种情况下，<code>go</code>命令行会根据当前目录来决定是否启用<code>module</code>功能。只有当当前目录在<code>GOPATH/src</code>目录之外而且当前目录包含<code>go.mod</code>文件或者其子目录包含<code>go.mod</code>文件才会启用。</li></ul> <h4 id="具体使用步骤"><a href="#具体使用步骤" class="header-anchor">#</a> 具体使用步骤：</h4> <ol><li>首先将你的版本更新到最新的Go版本(&gt;=1.11)，如何更新版本可以自行百度。</li> <li>通过go命令行，进入到你当前的工程目录下，在命令行设置临时环境变量<code>set GO111MODULE=on</code>；</li> <li>执行命令<code>go mod init</code>在当前目录下生成一个<code>go.mod</code>文件，执行这条命令时，当前目录不能存在<code>go.mod</code>文件。如果之前生成过，要先删除；</li> <li>如果你工程中存在一些不能确定版本的包，那么生成的<code>go.mod</code>文件可能就不完整，因此继续执行下面的命令；</li> <li>执行<code>go mod tidy</code>命令，它会添加缺失的模块以及移除不需要的模块。执行后会生成<code>go.sum</code>文件(模块下载条目)。添加参数<code>-v</code>，例如<code>go mod tidy -v</code>可以将执行的信息，即删除和添加的包打印到命令行；</li> <li>执行命令<code>go mod verify</code>来检查当前模块的依赖是否全部下载下来，是否下载下来被修改过。如果所有的模块都没有被修改过，那么执行这条命令之后，会打印<code>all modules verified</code>。</li> <li>执行命令<code>go mod vendor</code>生成vendor文件夹，该文件夹下将会放置你<code>go.mod</code>文件描述的依赖包，文件夹下同时还有一个文件<code>modules.txt</code>，它是你整个工程的所有模块。在执行这条命令之前，如果你工程之前有vendor目录，应该先进行删除。同理<code>go mod vendor -v</code>会将添加到vendor中的模块打印出来；</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/go/origin/结构体.html" class="prev">
        结构体
      </a></span> <span class="next"><a href="/go/origin/接口.html">
        接口
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.51f2f156.js" defer></script><script src="/assets/js/2.8911ec45.js" defer></script><script src="/assets/js/13.abf127cd.js" defer></script>
  </body>
</html>
