<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Selenium万能的自动化爬虫 | 独角兕大王</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.ccac5a78.css" as="style"><link rel="preload" href="/assets/js/app.51f2f156.js" as="script"><link rel="preload" href="/assets/js/2.8911ec45.js" as="script"><link rel="preload" href="/assets/js/108.76e1c800.js" as="script"><link rel="prefetch" href="/assets/js/10.6948c28b.js"><link rel="prefetch" href="/assets/js/100.276864ee.js"><link rel="prefetch" href="/assets/js/101.447ab1c7.js"><link rel="prefetch" href="/assets/js/102.f5b3c71d.js"><link rel="prefetch" href="/assets/js/103.16474d4b.js"><link rel="prefetch" href="/assets/js/104.ed58aef3.js"><link rel="prefetch" href="/assets/js/105.045203cd.js"><link rel="prefetch" href="/assets/js/106.be359e0b.js"><link rel="prefetch" href="/assets/js/107.7331bbca.js"><link rel="prefetch" href="/assets/js/109.e82166f3.js"><link rel="prefetch" href="/assets/js/11.d4ec37c8.js"><link rel="prefetch" href="/assets/js/110.4144755a.js"><link rel="prefetch" href="/assets/js/111.5864ab53.js"><link rel="prefetch" href="/assets/js/112.ca2aee84.js"><link rel="prefetch" href="/assets/js/113.641e7765.js"><link rel="prefetch" href="/assets/js/114.d69f8545.js"><link rel="prefetch" href="/assets/js/115.1b6a9f89.js"><link rel="prefetch" href="/assets/js/116.dde2c44e.js"><link rel="prefetch" href="/assets/js/117.4e79498c.js"><link rel="prefetch" href="/assets/js/12.7aac9c8d.js"><link rel="prefetch" href="/assets/js/13.abf127cd.js"><link rel="prefetch" href="/assets/js/14.aa4413a7.js"><link rel="prefetch" href="/assets/js/15.11a64e5b.js"><link rel="prefetch" href="/assets/js/16.f2d9a882.js"><link rel="prefetch" href="/assets/js/17.11c5bb7f.js"><link rel="prefetch" href="/assets/js/18.a522877b.js"><link rel="prefetch" href="/assets/js/19.6f31a972.js"><link rel="prefetch" href="/assets/js/20.b546c54e.js"><link rel="prefetch" href="/assets/js/21.6d055b7f.js"><link rel="prefetch" href="/assets/js/22.c48feceb.js"><link rel="prefetch" href="/assets/js/23.69941f78.js"><link rel="prefetch" href="/assets/js/24.6126dfc2.js"><link rel="prefetch" href="/assets/js/25.3475449c.js"><link rel="prefetch" href="/assets/js/26.96bb4643.js"><link rel="prefetch" href="/assets/js/27.da610e5d.js"><link rel="prefetch" href="/assets/js/28.b24ec15c.js"><link rel="prefetch" href="/assets/js/29.ec8af553.js"><link rel="prefetch" href="/assets/js/3.bec5f768.js"><link rel="prefetch" href="/assets/js/30.2e780db1.js"><link rel="prefetch" href="/assets/js/31.464c36ed.js"><link rel="prefetch" href="/assets/js/32.ad7d37c2.js"><link rel="prefetch" href="/assets/js/33.722f1ec5.js"><link rel="prefetch" href="/assets/js/34.8448d0fd.js"><link rel="prefetch" href="/assets/js/35.e5168ac9.js"><link rel="prefetch" href="/assets/js/36.edc404f1.js"><link rel="prefetch" href="/assets/js/37.5807602e.js"><link rel="prefetch" href="/assets/js/38.a519c89a.js"><link rel="prefetch" href="/assets/js/39.89af1b9a.js"><link rel="prefetch" href="/assets/js/4.5ed19beb.js"><link rel="prefetch" href="/assets/js/40.6c653db9.js"><link rel="prefetch" href="/assets/js/41.bc3b8b69.js"><link rel="prefetch" href="/assets/js/42.a0a02d9b.js"><link rel="prefetch" href="/assets/js/43.62f344e3.js"><link rel="prefetch" href="/assets/js/44.a7fd9d68.js"><link rel="prefetch" href="/assets/js/45.729c1c39.js"><link rel="prefetch" href="/assets/js/46.5b924aea.js"><link rel="prefetch" href="/assets/js/47.f3990404.js"><link rel="prefetch" href="/assets/js/48.f591f360.js"><link rel="prefetch" href="/assets/js/49.f7f213ad.js"><link rel="prefetch" href="/assets/js/5.2c5d28b5.js"><link rel="prefetch" href="/assets/js/50.b9ca2762.js"><link rel="prefetch" href="/assets/js/51.93672ee6.js"><link rel="prefetch" href="/assets/js/52.fb21314a.js"><link rel="prefetch" href="/assets/js/53.65343ccc.js"><link rel="prefetch" href="/assets/js/54.8081227d.js"><link rel="prefetch" href="/assets/js/55.e207659e.js"><link rel="prefetch" href="/assets/js/56.bde381df.js"><link rel="prefetch" href="/assets/js/57.f8eceb45.js"><link rel="prefetch" href="/assets/js/58.bef70bfd.js"><link rel="prefetch" href="/assets/js/59.7ab7562d.js"><link rel="prefetch" href="/assets/js/6.fc65a1ac.js"><link rel="prefetch" href="/assets/js/60.f40ac3ca.js"><link rel="prefetch" href="/assets/js/61.d2b463ab.js"><link rel="prefetch" href="/assets/js/62.cfdf1bcf.js"><link rel="prefetch" href="/assets/js/63.1e45ce59.js"><link rel="prefetch" href="/assets/js/64.a98fe86e.js"><link rel="prefetch" href="/assets/js/65.0234d7c5.js"><link rel="prefetch" href="/assets/js/66.724906f0.js"><link rel="prefetch" href="/assets/js/67.7806fda6.js"><link rel="prefetch" href="/assets/js/68.9f227dae.js"><link rel="prefetch" href="/assets/js/69.fdbc56ac.js"><link rel="prefetch" href="/assets/js/7.284de54e.js"><link rel="prefetch" href="/assets/js/70.04a9cc03.js"><link rel="prefetch" href="/assets/js/71.a6fa1dd9.js"><link rel="prefetch" href="/assets/js/72.2f8e3aa0.js"><link rel="prefetch" href="/assets/js/73.9bbb0cb6.js"><link rel="prefetch" href="/assets/js/74.9f122255.js"><link rel="prefetch" href="/assets/js/75.75e1fbd8.js"><link rel="prefetch" href="/assets/js/76.60ff3c3e.js"><link rel="prefetch" href="/assets/js/77.39a253ae.js"><link rel="prefetch" href="/assets/js/78.0e49712f.js"><link rel="prefetch" href="/assets/js/79.5f9c24a0.js"><link rel="prefetch" href="/assets/js/8.5c21a4cc.js"><link rel="prefetch" href="/assets/js/80.f826f188.js"><link rel="prefetch" href="/assets/js/81.b8995ea7.js"><link rel="prefetch" href="/assets/js/82.e9bf63e0.js"><link rel="prefetch" href="/assets/js/83.e3a00749.js"><link rel="prefetch" href="/assets/js/84.b940927c.js"><link rel="prefetch" href="/assets/js/85.ad46a9b2.js"><link rel="prefetch" href="/assets/js/86.190e0071.js"><link rel="prefetch" href="/assets/js/87.5f9eb9ef.js"><link rel="prefetch" href="/assets/js/88.cfaf7469.js"><link rel="prefetch" href="/assets/js/89.e64cc32c.js"><link rel="prefetch" href="/assets/js/9.0723805d.js"><link rel="prefetch" href="/assets/js/90.805edabe.js"><link rel="prefetch" href="/assets/js/91.6a1ab3f7.js"><link rel="prefetch" href="/assets/js/92.04ecd01e.js"><link rel="prefetch" href="/assets/js/93.e615470a.js"><link rel="prefetch" href="/assets/js/94.0ad7c41c.js"><link rel="prefetch" href="/assets/js/95.0e5ce618.js"><link rel="prefetch" href="/assets/js/96.b59cf9f4.js"><link rel="prefetch" href="/assets/js/97.2a327746.js"><link rel="prefetch" href="/assets/js/98.9c01ec88.js"><link rel="prefetch" href="/assets/js/99.952046bd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ccac5a78.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://github.com/fluidicon.png" alt="独角兕大王" class="logo"> <span class="site-name can-hide">独角兕大王</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/python/" class="nav-link router-link-active">
  Python
</a></div><div class="nav-item"><a href="/rust/" class="nav-link">
  Rust
</a></div><div class="nav-item"><a href="/go/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/lua/" class="nav-link">
  Lua
</a></div><div class="nav-item"><a href="/C/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="https://github.com/wuyuz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/double-W/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cnblogs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/python/" class="nav-link router-link-active">
  Python
</a></div><div class="nav-item"><a href="/rust/" class="nav-link">
  Rust
</a></div><div class="nav-item"><a href="/go/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/lua/" class="nav-link">
  Lua
</a></div><div class="nav-item"><a href="/C/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="https://github.com/wuyuz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/double-W/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cnblogs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python常用模块</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Django框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flask 框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Python爬虫</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/spider/HTTP和HTTPS协议.html" class="sidebar-link">HTTP和HTTPS协议</a></li><li><a href="/python/spider/request模块高级.html" class="sidebar-link">request模块高级</a></li><li><a href="/python/spider/requests相关知识.html" class="sidebar-link">requests相关知识</a></li><li><a href="/python/spider/requests知识进阶.html" class="sidebar-link">requests知识进阶</a></li><li><a href="/python/spider/数据解析.html" class="sidebar-link">数据解析</a></li><li><a href="/python/spider/多任务协程.html" class="sidebar-link">多任务协程爬虫</a></li><li><a href="/python/spider/Scrapy运用与总结.html" class="sidebar-link">Scrapy运用与总结</a></li><li><a href="/python/spider/Selenium记录.html" class="active sidebar-link">Selenium万能的自动化爬虫</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/spider/Selenium记录.html#selenium万能的自动化爬虫" class="sidebar-link">Selenium万能的自动化爬虫</a></li></ul></li><li><a href="/python/spider/aiohttp使用详细.html" class="sidebar-link">aiohttp使用详细</a></li><li><a href="/python/spider/爬虫面试案例.html" class="sidebar-link">爬虫面试案例</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python设计模式</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="selenium万能的自动化爬虫"><a href="#selenium万能的自动化爬虫" class="header-anchor">#</a> Selenium万能的自动化爬虫</h2> <h4 id="设置浏览器大小"><a href="#设置浏览器大小" class="header-anchor">#</a> 设置浏览器大小</h4> <ul><li><p>maximize_window()：设置浏览器大小为全屏</p></li> <li><p>set_window_size(500,500)：设置浏览器分辨率为：500×500</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time  

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">#设置浏览器大小：全屏</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>  
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

browser<span class="token punctuation">.</span>set_window_size<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span>  <span class="token comment"># 分辨率 1280*800  </span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

browser<span class="token punctuation">.</span>set_window_size<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span><span class="token number">768</span><span class="token punctuation">)</span>  <span class="token comment"># 分辨率 1024*768  </span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="刷新浏览器页面"><a href="#刷新浏览器页面" class="header-anchor">#</a> 刷新浏览器页面</h4> <ul><li><p>refresh()方法：刷新浏览器页面</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time  

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">#设置浏览器大小：全屏</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>  
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">try</span><span class="token punctuation">:</span>
    browser<span class="token punctuation">.</span>refresh<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#刷新页面</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'刷新页面'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test fail'</span><span class="token punctuation">)</span>

<span class="token comment">#输出内容：刷新页面</span>
</code></pre></div></li></ul> <h4 id="浏览器后退和前进"><a href="#浏览器后退和前进" class="header-anchor">#</a> 浏览器后退和前进</h4> <ul><li><p>back()：后退</p></li> <li><p>forward()：前进</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time  

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">#设置浏览器大小：全屏</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>  

<span class="token comment">#点击打开百度新闻页面</span>
browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'新闻'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

browser<span class="token punctuation">.</span>back<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#后退：回到百度首页</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

browser<span class="token punctuation">.</span>forward<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#前进：前进到百度新闻页面</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <p>本篇文字主要学习selenium定位页面元素的集中方法，以百度首页为例子。</p> <h4 id="元素定位方法主要有"><a href="#元素定位方法主要有" class="header-anchor">#</a> 元素定位方法主要有：</h4> <ul><li>id定位：find_element_by_id(' ')</li> <li>name定位：find_element_by_name(' ')</li> <li>class定位：find_element_by_class_name(' ')</li> <li>tag定位：find_element_by_tag_name(' ')</li> <li>link定位：find_element_by_link_text(' ')</li> <li>partial link定位：find_element_by_partial_link_text(' ')</li> <li>xpath定位：find_element_by_xpath(' ')</li> <li>CSS定位：find_element_by_css_selector(' ')</li> <li>By定位</li></ul> <h4 id="利用id定位元素"><a href="#利用id定位元素" class="header-anchor">#</a> 利用ID定位元素</h4> <ul><li><p>简单示例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token comment"># 设置浏览器</span>
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#设置浏览器大小：全屏</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#打开百度首页</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>
<span class="token comment">#定位百度搜索输入框之前，先分析下它的html结构</span>
<span class="token comment">#&lt;input type=&quot;text&quot; class=&quot;s_ipt nobg_s_fm_hover&quot; name=&quot;wd&quot; id=&quot;kw&quot; maxlength=&quot;100&quot; autocomplete=&quot;off&quot;&gt;</span>
<span class="token comment">#发现它的 id=&quot;kw&quot; ，接下来我们就通过id进行定位</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'kw'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'哈哈'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test post：id'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test fail'</span><span class="token punctuation">)</span>

<span class="token comment">#输出内容：test post：id</span>
</code></pre></div></li></ul> <h4 id="利用name定位元素"><a href="#利用name定位元素" class="header-anchor">#</a> 利用name定位元素</h4> <ul><li><p>简单示例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#打开百度首页</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>
<span class="token comment">#搜索框的html结构：&lt;input type=&quot;text&quot; class=&quot;s_ipt nobg_s_fm_hover&quot; name=&quot;wd&quot; id=&quot;kw&quot; maxlength=&quot;100&quot; autocomplete=&quot;off&quot;&gt;</span>
<span class="token comment"># 根据name属性定位</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    browser<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">'wd'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'哈哈'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test post：name'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test fail'</span><span class="token punctuation">)</span>

<span class="token comment">#输出内容：test post：name</span>
</code></pre></div></li></ul> <h4 id="利用class定位元素"><a href="#利用class定位元素" class="header-anchor">#</a> 利用class定位元素</h4> <ul><li><p>简单示例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#打开百度首页</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>
<span class="token comment">#搜索框的html结构：&lt;input type=&quot;text&quot; class=&quot;s_ipt nobg_s_fm_hover&quot; name=&quot;wd&quot; id=&quot;kw&quot; maxlength=&quot;100&quot; autocomplete=&quot;off&quot;&gt;</span>
<span class="token comment"># 根据class_name属性定位</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    browser<span class="token punctuation">.</span>find_element_by_class_name<span class="token punctuation">(</span><span class="token string">'s_ipt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'哈哈'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test post：class_name'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test fail'</span><span class="token punctuation">)</span>

<span class="token comment">#输出内容：test post：class_name</span>
</code></pre></div></li></ul> <h4 id="利用tag-name定位元素"><a href="#利用tag-name定位元素" class="header-anchor">#</a> 利用tag_name定位元素</h4> <ul><li><p>简单示例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#打开百度首页</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>
<span class="token comment">#搜索框的html结构：&lt;input type=&quot;text&quot; class=&quot;s_ipt nobg_s_fm_hover&quot; name=&quot;wd&quot; id=&quot;kw&quot; maxlength=&quot;100&quot; autocomplete=&quot;off&quot;&gt;</span>
<span class="token comment"># 根据tag_name属性定位</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    browser<span class="token punctuation">.</span>find_element_by_tag_name<span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test post：tag_name'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test fail'</span><span class="token punctuation">)</span>

<span class="token comment">#输出内容：test post：tag_name</span>
</code></pre></div></li></ul> <h4 id="利用link-text定位元素"><a href="#利用link-text定位元素" class="header-anchor">#</a> 利用link_text定位元素</h4> <ul><li><p>link_text：根据跳转链接上面的文字来定位元素。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#打开百度首页</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>
<span class="token comment"># 根据link_text属性定位元素“新闻”，然后点击按钮</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'新闻'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test post：tag_name'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test fail'</span><span class="token punctuation">)</span>

<span class="token comment">#输出内容：test post：link_text</span>
</code></pre></div></li></ul> <h4 id="利用partial-link-text定位元素"><a href="#利用partial-link-text定位元素" class="header-anchor">#</a> 利用partial_link_text定位元素</h4> <ul><li><p>和link_text定位元素差不多，partial_link_text是通过文字信息中的部分字段来定位元素。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#打开百度首页</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>
<span class="token comment"># 根据partial_link_text属性定位元素“新闻”，然后点击按钮</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    browser<span class="token punctuation">.</span>find_element_by_partial_link_text<span class="token punctuation">(</span><span class="token string">'闻'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test post：tag_name'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test fail'</span><span class="token punctuation">)</span>

<span class="token comment">#输出内容：test post：partial_link_text</span>
</code></pre></div></li></ul> <h4 id="利用xpath定位元素"><a href="#利用xpath定位元素" class="header-anchor">#</a> 利用xpath定位元素</h4> <ul><li><p>简单示例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#打开百度首页</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>
<span class="token comment"># 根据xpath定位元素</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    browser<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id=&quot;kw&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'哈哈'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test post：xpath'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test fail'</span><span class="token punctuation">)</span>

<span class="token comment">#输出内容：test post：xpath</span>
</code></pre></div></li></ul> <h4 id="利用css定位页面元素"><a href="#利用css定位页面元素" class="header-anchor">#</a> 利用CSS定位页面元素</h4> <ul><li><p>简单示例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#打开百度首页</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span>
<span class="token comment"># 根据css_selector定位元素</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    browser<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">'#kw'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'哈哈'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test post：xpath'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test fail'</span><span class="token punctuation">)</span>

<span class="token comment">#输出内容：test post：css_selector</span>
</code></pre></div></li></ul> <h4 id="by定位"><a href="#by定位" class="header-anchor">#</a> By定位</h4> <ul><li><p>除了使用上面的方法外，还可以利用find_element()方法，通过By来定位元素。</p></li> <li><p>使用之前需要导入By类：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#导入By类</span>
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> By
</code></pre></div></li> <li><p>那么上面的方法还可以改写为：</p> <div class="language-python extra-class"><pre class="language-python"><code>browser<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'kw'</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>NAME<span class="token punctuation">,</span><span class="token string">'wd'</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CLASS_NAME<span class="token punctuation">,</span><span class="token string">'s_ipt'</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>TAG_NAME<span class="token punctuation">,</span><span class="token string">'form'</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>LINK_TEXT<span class="token punctuation">,</span><span class="token string">'新闻'</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PARTIAL_LINK_TEXT<span class="token punctuation">,</span><span class="token string">'闻'</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>XPATH<span class="token punctuation">,</span><span class="token string">'//*[@id=&quot;kw&quot;]'</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span><span class="token string">'#kw'</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="输入内容"><a href="#输入内容" class="header-anchor">#</a> 输入内容</h4> <ul><li><p>send_keys('valve')：输入内容valve</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#定位输入框</span>
input_box <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'kw'</span><span class="token punctuation">)</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment">#输入内容：selenium</span>
    input_box<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'selenium'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'搜索关键词：selenium'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">)</span>

<span class="token comment">#输出内容：搜索关键词：selenium</span>
</code></pre></div></li></ul> <h4 id="点击按钮"><a href="#点击按钮" class="header-anchor">#</a> 点击按钮</h4> <ul><li><p>click():点击按钮</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#定位搜索按钮</span>
button <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'su'</span><span class="token punctuation">)</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment">#点击搜索按钮</span>
    button<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'成功搜索'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'fail搜索'</span><span class="token punctuation">)</span>
<span class="token comment">#输出内容：成功搜索</span>
</code></pre></div></li></ul> <h4 id="清空输入框"><a href="#清空输入框" class="header-anchor">#</a> 清空输入框</h4> <ul><li><p>clear()：清空输入框</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#clear()：清空输入框</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    input_box<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'成功清空输入框'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'fail清空输入框'</span><span class="token punctuation">)</span>
<span class="token comment">#输出内容：成功清空输入框</span>
</code></pre></div></li></ul> <h4 id="输入内容、点击按钮、清空输入完整实例"><a href="#输入内容、点击按钮、清空输入完整实例" class="header-anchor">#</a> 输入内容、点击按钮、清空输入完整实例</h4> <ul><li><p>简单示例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time  

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">#设置浏览器大小：全屏</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>  

<span class="token comment">#定位输入框</span>
input_box <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'kw'</span><span class="token punctuation">)</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment">#输入内容：selenium</span>
    input_box<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'selenium'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'搜索关键词：selenium'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">)</span>
<span class="token comment">#输出内容：搜索关键词：selenium</span>

<span class="token comment">#定位搜索按钮</span>
button <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'su'</span><span class="token punctuation">)</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment">#点击搜索按钮</span>
    button<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'成功搜索'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'fail搜索'</span><span class="token punctuation">)</span>
<span class="token comment">#输出内容：成功搜索</span>

<span class="token comment">#clear()：清空输入框</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    input_box<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'成功清空输入框'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'fail清空输入框'</span><span class="token punctuation">)</span>
<span class="token comment">#输出内容：成功清空输入框</span>
</code></pre></div></li></ul> <h4 id="submit-模拟-回车-操作"><a href="#submit-模拟-回车-操作" class="header-anchor">#</a> submit()：模拟‘回车’操作</h4> <ul><li><p>submit()：通常应用于提交表单；例如：搜索框输入内容后的回车操作。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time  

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">#设置浏览器大小：全屏</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>  

<span class="token comment">#定位输入框</span>
input_box <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'kw'</span><span class="token punctuation">)</span>
<span class="token comment">#输入关键词：selenium</span>
input_box<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'selenium'</span><span class="token punctuation">)</span>
<span class="token comment">#模拟回车操作</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    input_box<span class="token punctuation">.</span>submit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'成功回车'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">)</span>
<span class="token comment">#输出内容：成功回车</span>
</code></pre></div></li></ul> <h4 id="获取页面title"><a href="#获取页面title" class="header-anchor">#</a> 获取页面title</h4> <ul><li><p>title：获取当前页面的标题显示的字段</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time  

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>  

<span class="token comment">#打印网页标题</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>browser<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
<span class="token comment">#输出内容：百度一下，你就知道</span>
</code></pre></div></li></ul> <h4 id="获取页面url"><a href="#获取页面url" class="header-anchor">#</a> 获取页面URL</h4> <ul><li><p>current_url：获取当前页面的URL</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time  

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>  

<span class="token comment">#打印网页标题</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>browser<span class="token punctuation">.</span>current_url<span class="token punctuation">)</span>
<span class="token comment">#输出内容：https://www.baidu.com/</span>
</code></pre></div></li></ul> <h4 id="获取浏览器版本号"><a href="#获取浏览器版本号" class="header-anchor">#</a> 获取浏览器版本号</h4> <ul><li><p>capabilities['version'])：打印浏览器version的值</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time  

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>  

<span class="token comment">#打印网页标题</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>browser<span class="token punctuation">.</span>capabilities<span class="token punctuation">[</span><span class="token string">'version'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">#输出内容：67.0.3396.87</span>
</code></pre></div></li></ul> <h4 id="获取元素尺寸"><a href="#获取元素尺寸" class="header-anchor">#</a> 获取元素尺寸</h4> <ul><li><p>size：返回元素的尺寸</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time  

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>  

<span class="token comment">#定位输入框</span>
input_box <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'kw'</span><span class="token punctuation">)</span>
<span class="token comment">#打印输入框尺寸</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>input_box<span class="token punctuation">.</span>size<span class="token punctuation">)</span>
<span class="token comment">#输出内容：{'height': 22, 'width': 500}</span>
</code></pre></div></li></ul> <h4 id="获取元素的文本"><a href="#获取元素的文本" class="header-anchor">#</a> 获取元素的文本</h4> <ul><li><p>text：返回元素的文本信息</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time  

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>  

<span class="token comment">#定位备案元素</span>
recordcode <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'jgwab'</span><span class="token punctuation">)</span>
<span class="token comment">#打印备案元素信息</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>recordcode<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
<span class="token comment">#输出内容：京公网安备11000002000001号</span>
</code></pre></div></li></ul> <h4 id="获得属性值"><a href="#获得属性值" class="header-anchor">#</a> 获得属性值</h4> <ul><li><p>get_attribute('')方法</p></li> <li><p>get_attribute('href'):获取href属性值</p></li> <li><p>get_attribute('id'):获取id属性值</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding=utf-8</span>
<span class="token keyword">import</span> time
<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver


driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>implicitly_wait<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;https://www.baidu.com&quot;</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> link <span class="token keyword">in</span> driver<span class="token punctuation">.</span>find_elements_by_xpath<span class="token punctuation">(</span><span class="token string">&quot;//*[@href]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span>link<span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <p>在webdriver中，鼠标的一些操作如：双击、右击、悬停、拖动等都被封装在ActionChains类中，我们只用在需要使用的时候，导入这个类就可以了。</p> <h4 id="actionchains类提供的鼠标常用方法"><a href="#actionchains类提供的鼠标常用方法" class="header-anchor">#</a> ActionChains类提供的鼠标常用方法：</h4> <ul><li>perform()：执行所有 ActionChains 中存储的行为。</li> <li>context_click()：右击</li> <li>double_click()：双击</li> <li>drag_and_drop()：拖到</li> <li>move_to_element()：鼠标悬停</li></ul> <h4 id="注意"><a href="#注意" class="header-anchor">#</a> 注意：</h4> <ul><li>使用之前需要引入 ActionChains 类。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>from selenium.webdriver.common.action_chains import ActionChains
</code></pre></div><h4 id="鼠标右击实例"><a href="#鼠标右击实例" class="header-anchor">#</a> 鼠标右击实例</h4> <ul><li><p>右击示例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>action_chains <span class="token keyword">import</span> ActionChains  <span class="token comment"># 引入 ActionChains 类</span>

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>  


<span class="token comment"># 定位到要右击的元素</span>
right_click <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'新闻'</span><span class="token punctuation">)</span>

<span class="token comment"># 对定位到的元素执行鼠标右键操作</span>
<span class="token comment">#ActionChains(driver)：调用ActionChains()类，并将浏览器驱动browser作为参数传入</span>
<span class="token comment">#context_click(right_click)：模拟鼠标双击，需要传入指定元素定位作为参数</span>
<span class="token comment">#perform()：执行ActionChains()中储存的所有操作，可以看做是执行之前一系列的操作</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    ActionChains<span class="token punctuation">(</span>browser<span class="token punctuation">)</span><span class="token punctuation">.</span>context_click<span class="token punctuation">(</span>right_click<span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'成功右击'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">)</span>
<span class="token comment">#输出内容：成功双击</span>
</code></pre></div></li></ul> <h4 id="注意-2"><a href="#注意-2" class="header-anchor">#</a> 注意：</h4> <ul><li>ActionChains(driver)：调用ActionChains()类，并将浏览器驱动browser作为参数传入</li> <li>context_click(right_click)：模拟鼠标双击，需要传入指定元素定位作为参数</li> <li>perform()：执行ActionChains()中储存的所有操作，可以看做是执行之前一系列的操作</li></ul> <h4 id="鼠标右击"><a href="#鼠标右击" class="header-anchor">#</a> 鼠标右击</h4> <ul><li><p>context_click()：右击</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#   鼠标右击</span>
<span class="token comment"># 定位到要右击的元素</span>
right_click  <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;xx&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 对定位到的元素执行右击操作</span>
ActionChains<span class="token punctuation">(</span>browser<span class="token punctuation">)</span><span class="token punctuation">.</span>move_to_element<span class="token punctuation">(</span>right_click <span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="鼠标双击"><a href="#鼠标双击" class="header-anchor">#</a> 鼠标双击</h4> <ul><li><p>double_click()：双击</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 定位到要右击的元素</span>
double_click <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'xx'</span><span class="token punctuation">)</span>

<span class="token comment"># 对定位到的元素执行鼠标右键操作</span>
ActionChains<span class="token punctuation">(</span>browser<span class="token punctuation">)</span><span class="token punctuation">.</span>context_click<span class="token punctuation">(</span>double_click<span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="鼠标拖动"><a href="#鼠标拖动" class="header-anchor">#</a> 鼠标拖动</h4> <ul><li><p>drag_and_drop(source,target)：拖动</p></li> <li><p>source：开始位置；需要拖动的元素</p></li> <li><p>target：结束位置；拖到后需要放置的目的地元素</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 开始位置：定位到元素的原位置</span>
source <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;xx&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 结束位置：定位到元素要移动到的目标位置</span>
target <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;xx&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 执行元素的拖放操作</span>
ActionChains<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">.</span>drag_and_drop<span class="token punctuation">(</span>source<span class="token punctuation">,</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="鼠标悬停"><a href="#鼠标悬停" class="header-anchor">#</a> 鼠标悬停</h4> <ul><li><p>move_to_element()：鼠标悬停</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 定位到要悬停的元素</span>
move <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;xx&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 对定位到的元素执行悬停操作</span>
ActionChains<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">.</span>move_to_element<span class="token punctuation">(</span>move<span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="导入键盘类keys"><a href="#导入键盘类keys" class="header-anchor">#</a> 导入键盘类Keys()</h4> <ul><li><p>selenium中的Keys()类提供了大部分的键盘操作方法；通过send_keys()方法来模拟键盘上的按键。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 导入键盘类 Keys()</span>
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keys
</code></pre></div></li></ul> <h5 id="常用的键盘操作"><a href="#常用的键盘操作" class="header-anchor">#</a> 常用的键盘操作：</h5> <ul><li><p>send_keys(Keys.BACK_SPACE)：删除键(BackSpace)</p></li> <li><p>send_keys(Keys.SPACE)：空格键(Space)</p></li> <li><p>send_keys(Keys.TAB)：制表键(TAB)</p></li> <li><p>send_keys(Keys.ESCAPE)：回退键(ESCAPE)</p></li> <li><p>send_keys(Keys.ENTER)：回车键(ENTER)</p></li> <li><p>send_keys(Keys.CONTROL,'a')：全选(Ctrl+A)</p></li> <li><p>send_keys(Keys.CONTROL,'c')：复制(Ctrl+C)</p></li> <li><p>send_keys(Keys.CONTROL,'x')：剪切(Ctrl+X)</p></li> <li><p>send_keys(Keys.CONTROL,'v')：粘贴(Ctrl+V)</p></li> <li><p>send_keys(Keys.F1)：键盘F1</p></li> <li><p>.....</p></li> <li><p>send_keys(Keys.F12)：键盘F12</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver  
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keys  

driver<span class="token operator">=</span>webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>  
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;http://www.baidu.com&quot;</span><span class="token punctuation">)</span>  
<span class="token comment">#输入关键词内容</span>
driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;kw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">&quot;selenium&quot;</span><span class="token punctuation">)</span>  
<span class="token comment">#删除键</span>
driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;kw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>BACK_SPACE<span class="token punctuation">)</span>  
<span class="token comment">#空格键 </span>
driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;kw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>SPACE<span class="token punctuation">)</span>  
<span class="token comment">#输入内容</span>
driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;kw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">&quot;教程&quot;</span><span class="token punctuation">)</span>  
<span class="token comment">#全选(Ctrl+A)  </span>
driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;kw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>CONTROL<span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">)</span> 
<span class="token comment">#剪切(Ctrl+X)  </span>
driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;kw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>CONTROL<span class="token punctuation">,</span><span class="token string">'x'</span><span class="token punctuation">)</span> 
<span class="token comment">#粘贴(Ctrl+V)  </span>
driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;kw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>CONTROL<span class="token punctuation">,</span><span class="token string">'v'</span><span class="token punctuation">)</span>  
<span class="token comment">#回车键  </span>
driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">&quot;kw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>ENTER<span class="token punctuation">)</span>
</code></pre></div></li></ul> <p>​       如果遇到使用ajax加载的网页，页面元素可能不是同时加载出来的，这个时候，就需要我们通过设置一个等待条件，等待页面元素加载完成，避免出现因为元素未加载导致的错误的出现。</p> <p>WebDriver提供了两种等待类型：显示等待、隐式等待。</p> <h4 id="显示等待-webdriverwait-类"><a href="#显示等待-webdriverwait-类" class="header-anchor">#</a> 显示等待：WebDriverWait()类</h4> <ul><li><p>显示等待：设置一个等待时间和一个条件，在规定时间内，每隔一段时间查看下条件是否成立，如果成立那么程序就继续执行，否则就提示一个超时异常（TimeoutException）。</p></li> <li><p>通常情况下<strong>WebDriverWait</strong>类会结合<strong>ExpectedCondition</strong>类一起使用。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>wait <span class="token keyword">import</span> WebDriverWait
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support <span class="token keyword">import</span> expected_conditions <span class="token keyword">as</span> EC
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> By

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>
<span class="token comment"># 设置浏览器：driver  等待时间：20s</span>
wait <span class="token operator">=</span> WebDriverWait<span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token comment"># 设置判断条件：等待id='kw'的元素加载完成</span>
input_box <span class="token operator">=</span> wait<span class="token punctuation">.</span>until<span class="token punctuation">(</span>EC<span class="token punctuation">.</span>presence_of_element_located<span class="token punctuation">(</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">'kw'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 在关键词输入：关键词</span>
input_box<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'关键词'</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h5 id="webdriverwait的具体参数和方法"><a href="#webdriverwait的具体参数和方法" class="header-anchor">#</a> WebDriverWait的具体参数和方法：</h5> <div class="language- extra-class"><pre class="language-text"><code>WebDriverWait(driver,timeout,poll_frequency=0.5,ignored_exceptions=None)
    driver: 浏览器驱动
    timeout: 超时时间，等待的最长时间（同时要考虑隐性等待时间）
    poll_frequency: 每次检测的间隔时间，默认是0.5秒
    ignored_exceptions:超时后的异常信息，默认情况下抛出NoSuchElementException异常


until(method,message='')
    method: 在等待期间，每隔一段时间调用这个传入的方法，直到返回值不是False
    message: 如果超时，抛出TimeoutException，将message传入异常


until_not(method,message='')
    until_not 与until相反，until是当某元素出现或什么条件成立则继续执行，
    until_not是当某元素消失或什么条件不成立则继续执行，参数也相同。
    method
    message
</code></pre></div><h5 id="expectedcondition"><a href="#expectedcondition" class="header-anchor">#</a> ExpectedCondition</h5> <ul><li><p>ExpectedCondition中可使用的判断条件：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support <span class="token keyword">import</span> expected_conditions <span class="token keyword">as</span> EC


<span class="token comment"># 判断标题是否和预期的一致</span>
title_is
<span class="token comment"># 判断标题中是否包含预期的字符串</span>
title_contains


<span class="token comment"># 判断指定元素是否加载出来</span>
presence_of_element_located
<span class="token comment"># 判断所有元素是否加载完成</span>
presence_of_all_elements_located


<span class="token comment"># 判断某个元素是否可见. 可见代表元素非隐藏，并且元素的宽和高都不等于0，传入参数是元组类型的locator</span>
visibility_of_element_located
<span class="token comment"># 判断元素是否可见，传入参数是定位后的元素WebElement</span>
visibility_of
<span class="token comment"># 判断某个元素是否不可见，或是否不存在于DOM树</span>
invisibility_of_element_located


<span class="token comment"># 判断元素的 text 是否包含预期字符串</span>
text_to_be_present_in_element
<span class="token comment"># 判断元素的 value 是否包含预期字符串</span>
text_to_be_present_in_element_value


<span class="token comment">#判断frame是否可切入，可传入locator元组或者直接传入定位方式：id、name、index或WebElement</span>
frame_to_be_available_and_switch_to_it


<span class="token comment">#判断是否有alert出现</span>
alert_is_present


<span class="token comment">#判断元素是否可点击</span>
element_to_be_clickable


<span class="token comment"># 判断元素是否被选中,一般用在下拉列表，传入WebElement对象</span>
element_to_be_selected
<span class="token comment"># 判断元素是否被选中</span>
element_located_to_be_selected
<span class="token comment"># 判断元素的选中状态是否和预期一致，传入参数：定位后的元素，相等返回True，否则返回False</span>
element_selection_state_to_be
<span class="token comment"># 判断元素的选中状态是否和预期一致，传入参数：元素的定位，相等返回True，否则返回False</span>
element_located_selection_state_to_be


<span class="token comment">#判断一个元素是否仍在DOM中，传入WebElement对象，可以判断页面是否刷新了</span>
staleness_of
</code></pre></div></li></ul> <h5 id="调用方法如下"><a href="#调用方法如下" class="header-anchor">#</a> 调用方法如下：</h5> <div class="language- extra-class"><pre class="language-text"><code>WebDriverWait(driver, 超时时长, 调用频率, 忽略异常).until(可执行方法, 超时时返回的信息)
</code></pre></div><h4 id="隐式等待"><a href="#隐式等待" class="header-anchor">#</a> 隐式等待</h4> <ul><li><p>implicitly_wait(xx)：设置等待时间为xx秒，等待元素加载完成，如果到了时间元素没有加载出，就抛出一个NoSuchElementException的错误。</p></li> <li><p>注意：隐性等待对整个driver的周期都起作用，所以只要设置一次即可。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>implicitly_wait<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>  <span class="token comment"># 隐性等待，最长等30秒</span>

driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>driver<span class="token punctuation">.</span>current_url<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>driver<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="强制等待-sleep"><a href="#强制等待-sleep" class="header-anchor">#</a> 强制等待：sleep()</h4> <ul><li><p>强制等待：不管浏览器元素是否加载完成，程序都得等待3秒，3秒一到，继续执行下面的代码。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> time <span class="token keyword">import</span> sleep

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>

sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment"># 强制等待3秒再执行下一步</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>driver<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
</code></pre></div></li></ul> <p>之前学习了8种定位单个元素的方法，同时webdriver还提供了8种定位一组元素的方法。唯一区别就是在单词element后面增加了一个s表示复数：</p> <h4 id="定位一组元素"><a href="#定位一组元素" class="header-anchor">#</a> 定位一组元素</h4> <ul><li>find_elements_by_id('')</li> <li>find_elements_by_id_by_class_name('')</li> <li>find_elements_by_tag_name('')</li> <li>find_elements_by_link_text('')</li> <li>find_elements_by_partial_link_text('')</li> <li>find_elements_by_xpath('')</li> <li>find_elements_by_css_selector('')</li></ul> <h4 id="单选框选中"><a href="#单选框选中" class="header-anchor">#</a> 单选框选中</h4> <ul><li><p>简单示例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time
driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://news.baidu.com/'</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment">#定位搜索框下面的新闻全文和新闻标题单选项</span>
    radio_button <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_elements_by_css_selector<span class="token punctuation">(</span><span class="token string">&quot;.search-radios&gt;input&quot;</span><span class="token punctuation">)</span>
    <span class="token comment"># 定位的一组元素后，返回的是一个列表，这里就循环选中对应的选项</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> radio_button<span class="token punctuation">:</span>
        i<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'选中单选框.'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">,</span><span class="token builtin">format</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="复选框选中"><a href="#复选框选中" class="header-anchor">#</a> 复选框选中</h4> <ul><li><p>简单示例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> time
driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://passport.baidu.com/v2/?reg&amp;tt=1529850358050&amp;overseas=undefined&amp;gid=02B2650-6D11-430E-A19D-529F69B9F1CE&amp;tpl=xw&amp;u=http%3A%2F%2Fnews.baidu.com%2F'</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment">#定位 阅读并接受《百度用户协议》及《百度隐私权保护声明》 的多选框</span>
    checkbox <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_elements_by_css_selector<span class="token punctuation">(</span><span class="token string">&quot;#TANGRAM__PSP_3__isAgree&quot;</span><span class="token punctuation">)</span>
    <span class="token comment"># 定位的一组元素后，返回的是一个列表，这里就循环选中对应的选项</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> checkbox<span class="token punctuation">:</span>
        i<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'选中多选框'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">,</span><span class="token builtin">format</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/python/spider/Scrapy运用与总结.html" class="prev">
        Scrapy运用与总结
      </a></span> <span class="next"><a href="/python/spider/aiohttp使用详细.html">
        aiohttp使用详细
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.51f2f156.js" defer></script><script src="/assets/js/2.8911ec45.js" defer></script><script src="/assets/js/108.76e1c800.js" defer></script>
  </body>
</html>
