<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常用模块 | 独角兕大王</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.ccac5a78.css" as="style"><link rel="preload" href="/assets/js/app.51f2f156.js" as="script"><link rel="preload" href="/assets/js/2.8911ec45.js" as="script"><link rel="preload" href="/assets/js/102.f5b3c71d.js" as="script"><link rel="prefetch" href="/assets/js/10.6948c28b.js"><link rel="prefetch" href="/assets/js/100.276864ee.js"><link rel="prefetch" href="/assets/js/101.447ab1c7.js"><link rel="prefetch" href="/assets/js/103.16474d4b.js"><link rel="prefetch" href="/assets/js/104.ed58aef3.js"><link rel="prefetch" href="/assets/js/105.045203cd.js"><link rel="prefetch" href="/assets/js/106.be359e0b.js"><link rel="prefetch" href="/assets/js/107.7331bbca.js"><link rel="prefetch" href="/assets/js/108.76e1c800.js"><link rel="prefetch" href="/assets/js/109.e82166f3.js"><link rel="prefetch" href="/assets/js/11.d4ec37c8.js"><link rel="prefetch" href="/assets/js/110.4144755a.js"><link rel="prefetch" href="/assets/js/111.5864ab53.js"><link rel="prefetch" href="/assets/js/112.ca2aee84.js"><link rel="prefetch" href="/assets/js/113.641e7765.js"><link rel="prefetch" href="/assets/js/114.d69f8545.js"><link rel="prefetch" href="/assets/js/115.1b6a9f89.js"><link rel="prefetch" href="/assets/js/116.dde2c44e.js"><link rel="prefetch" href="/assets/js/117.4e79498c.js"><link rel="prefetch" href="/assets/js/12.7aac9c8d.js"><link rel="prefetch" href="/assets/js/13.abf127cd.js"><link rel="prefetch" href="/assets/js/14.aa4413a7.js"><link rel="prefetch" href="/assets/js/15.11a64e5b.js"><link rel="prefetch" href="/assets/js/16.f2d9a882.js"><link rel="prefetch" href="/assets/js/17.11c5bb7f.js"><link rel="prefetch" href="/assets/js/18.a522877b.js"><link rel="prefetch" href="/assets/js/19.6f31a972.js"><link rel="prefetch" href="/assets/js/20.b546c54e.js"><link rel="prefetch" href="/assets/js/21.6d055b7f.js"><link rel="prefetch" href="/assets/js/22.c48feceb.js"><link rel="prefetch" href="/assets/js/23.69941f78.js"><link rel="prefetch" href="/assets/js/24.6126dfc2.js"><link rel="prefetch" href="/assets/js/25.3475449c.js"><link rel="prefetch" href="/assets/js/26.96bb4643.js"><link rel="prefetch" href="/assets/js/27.da610e5d.js"><link rel="prefetch" href="/assets/js/28.b24ec15c.js"><link rel="prefetch" href="/assets/js/29.ec8af553.js"><link rel="prefetch" href="/assets/js/3.bec5f768.js"><link rel="prefetch" href="/assets/js/30.2e780db1.js"><link rel="prefetch" href="/assets/js/31.464c36ed.js"><link rel="prefetch" href="/assets/js/32.ad7d37c2.js"><link rel="prefetch" href="/assets/js/33.722f1ec5.js"><link rel="prefetch" href="/assets/js/34.8448d0fd.js"><link rel="prefetch" href="/assets/js/35.e5168ac9.js"><link rel="prefetch" href="/assets/js/36.edc404f1.js"><link rel="prefetch" href="/assets/js/37.5807602e.js"><link rel="prefetch" href="/assets/js/38.a519c89a.js"><link rel="prefetch" href="/assets/js/39.89af1b9a.js"><link rel="prefetch" href="/assets/js/4.5ed19beb.js"><link rel="prefetch" href="/assets/js/40.6c653db9.js"><link rel="prefetch" href="/assets/js/41.bc3b8b69.js"><link rel="prefetch" href="/assets/js/42.a0a02d9b.js"><link rel="prefetch" href="/assets/js/43.62f344e3.js"><link rel="prefetch" href="/assets/js/44.a7fd9d68.js"><link rel="prefetch" href="/assets/js/45.729c1c39.js"><link rel="prefetch" href="/assets/js/46.5b924aea.js"><link rel="prefetch" href="/assets/js/47.f3990404.js"><link rel="prefetch" href="/assets/js/48.f591f360.js"><link rel="prefetch" href="/assets/js/49.f7f213ad.js"><link rel="prefetch" href="/assets/js/5.2c5d28b5.js"><link rel="prefetch" href="/assets/js/50.b9ca2762.js"><link rel="prefetch" href="/assets/js/51.93672ee6.js"><link rel="prefetch" href="/assets/js/52.fb21314a.js"><link rel="prefetch" href="/assets/js/53.65343ccc.js"><link rel="prefetch" href="/assets/js/54.8081227d.js"><link rel="prefetch" href="/assets/js/55.e207659e.js"><link rel="prefetch" href="/assets/js/56.bde381df.js"><link rel="prefetch" href="/assets/js/57.f8eceb45.js"><link rel="prefetch" href="/assets/js/58.bef70bfd.js"><link rel="prefetch" href="/assets/js/59.7ab7562d.js"><link rel="prefetch" href="/assets/js/6.fc65a1ac.js"><link rel="prefetch" href="/assets/js/60.f40ac3ca.js"><link rel="prefetch" href="/assets/js/61.d2b463ab.js"><link rel="prefetch" href="/assets/js/62.cfdf1bcf.js"><link rel="prefetch" href="/assets/js/63.1e45ce59.js"><link rel="prefetch" href="/assets/js/64.a98fe86e.js"><link rel="prefetch" href="/assets/js/65.0234d7c5.js"><link rel="prefetch" href="/assets/js/66.724906f0.js"><link rel="prefetch" href="/assets/js/67.7806fda6.js"><link rel="prefetch" href="/assets/js/68.9f227dae.js"><link rel="prefetch" href="/assets/js/69.fdbc56ac.js"><link rel="prefetch" href="/assets/js/7.284de54e.js"><link rel="prefetch" href="/assets/js/70.04a9cc03.js"><link rel="prefetch" href="/assets/js/71.a6fa1dd9.js"><link rel="prefetch" href="/assets/js/72.2f8e3aa0.js"><link rel="prefetch" href="/assets/js/73.9bbb0cb6.js"><link rel="prefetch" href="/assets/js/74.9f122255.js"><link rel="prefetch" href="/assets/js/75.75e1fbd8.js"><link rel="prefetch" href="/assets/js/76.60ff3c3e.js"><link rel="prefetch" href="/assets/js/77.39a253ae.js"><link rel="prefetch" href="/assets/js/78.0e49712f.js"><link rel="prefetch" href="/assets/js/79.5f9c24a0.js"><link rel="prefetch" href="/assets/js/8.5c21a4cc.js"><link rel="prefetch" href="/assets/js/80.f826f188.js"><link rel="prefetch" href="/assets/js/81.b8995ea7.js"><link rel="prefetch" href="/assets/js/82.e9bf63e0.js"><link rel="prefetch" href="/assets/js/83.e3a00749.js"><link rel="prefetch" href="/assets/js/84.b940927c.js"><link rel="prefetch" href="/assets/js/85.ad46a9b2.js"><link rel="prefetch" href="/assets/js/86.190e0071.js"><link rel="prefetch" href="/assets/js/87.5f9eb9ef.js"><link rel="prefetch" href="/assets/js/88.cfaf7469.js"><link rel="prefetch" href="/assets/js/89.e64cc32c.js"><link rel="prefetch" href="/assets/js/9.0723805d.js"><link rel="prefetch" href="/assets/js/90.805edabe.js"><link rel="prefetch" href="/assets/js/91.6a1ab3f7.js"><link rel="prefetch" href="/assets/js/92.04ecd01e.js"><link rel="prefetch" href="/assets/js/93.e615470a.js"><link rel="prefetch" href="/assets/js/94.0ad7c41c.js"><link rel="prefetch" href="/assets/js/95.0e5ce618.js"><link rel="prefetch" href="/assets/js/96.b59cf9f4.js"><link rel="prefetch" href="/assets/js/97.2a327746.js"><link rel="prefetch" href="/assets/js/98.9c01ec88.js"><link rel="prefetch" href="/assets/js/99.952046bd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ccac5a78.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://github.com/fluidicon.png" alt="独角兕大王" class="logo"> <span class="site-name can-hide">独角兕大王</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/python/" class="nav-link router-link-active">
  Python
</a></div><div class="nav-item"><a href="/rust/" class="nav-link">
  Rust
</a></div><div class="nav-item"><a href="/go/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/lua/" class="nav-link">
  Lua
</a></div><div class="nav-item"><a href="/C/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="https://github.com/wuyuz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/double-W/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cnblogs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/python/" class="nav-link router-link-active">
  Python
</a></div><div class="nav-item"><a href="/rust/" class="nav-link">
  Rust
</a></div><div class="nav-item"><a href="/go/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/lua/" class="nav-link">
  Lua
</a></div><div class="nav-item"><a href="/C/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="https://github.com/wuyuz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/double-W/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cnblogs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Python常用模块</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/pkg/常用模块.html" class="active sidebar-link">常用模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/pkg/常用模块.html#collections模块" class="sidebar-link">collections模块</a></li><li class="sidebar-sub-header"><a href="/python/pkg/常用模块.html#decimal模块" class="sidebar-link">decimal模块</a></li><li class="sidebar-sub-header"><a href="/python/pkg/常用模块.html#time、datetime" class="sidebar-link">time、datetime</a></li><li class="sidebar-sub-header"><a href="/python/pkg/常用模块.html#random模块" class="sidebar-link">random模块</a></li><li class="sidebar-sub-header"><a href="/python/pkg/常用模块.html#os模块" class="sidebar-link">os模块</a></li><li class="sidebar-sub-header"><a href="/python/pkg/常用模块.html#sys模块" class="sidebar-link">sys模块</a></li><li class="sidebar-sub-header"><a href="/python/pkg/常用模块.html#json模块" class="sidebar-link">json模块</a></li><li class="sidebar-sub-header"><a href="/python/pkg/常用模块.html#pickle模块" class="sidebar-link">pickle模块</a></li><li class="sidebar-sub-header"><a href="/python/pkg/常用模块.html#shelve模块" class="sidebar-link">shelve模块</a></li><li class="sidebar-sub-header"><a href="/python/pkg/常用模块.html#hashlib模块" class="sidebar-link">hashlib模块</a></li><li class="sidebar-sub-header"><a href="/python/pkg/常用模块.html#logging模块" class="sidebar-link">logging模块</a></li></ul></li><li><a href="/python/pkg/常用模块（二）.html" class="sidebar-link">常用模块（二）</a></li><li><a href="/python/pkg/asyncio模块.html" class="sidebar-link">asyncio 模块</a></li><li><a href="/python/pkg/socketserver模块.html" class="sidebar-link">socketserver模块</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Django框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flask 框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python爬虫</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python设计模式</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="常用模块"><a href="#常用模块" class="header-anchor">#</a> 常用模块</h3> <ul><li><p><strong>什么是模块</strong>：模块就是一组功能的集合，我们的程序可以导入模块来复用模块里的功能</p> <p>python 模块分为3种：</p> <ol><li><p>内置模块：python安装时自带的</p></li> <li><p>扩展模块： 比如第三方模块</p></li> <li><p>自定义模块： 自己写的模块</p></li></ol> <p>​</p></li></ul> <h2 id="collections模块"><a href="#collections模块" class="header-anchor">#</a> <code>collections模块</code></h2> <p>在内置数据类型（<code>dict、list、set、tuple</code>）的基础上，collections模块还提供了几个额外的数据类型：<code>Counter</code>、<code>deque</code>、<code>defaultdict</code>、<code>namedtuple</code>和<code>OrderedDict</code>等</p> <div class="language-python extra-class"><pre class="language-python"><code>	<span class="token comment">#1.namedtuple: 生成可以使用名字来访问元素内容的tuple</span>
<span class="token keyword">from</span> collections <span class="token keyword">import</span> namedtuple
Point <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'Point'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">,</span><span class="token string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
p<span class="token operator">=</span>Point<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>x<span class="token punctuation">,</span>p<span class="token punctuation">.</span>y<span class="token punctuation">)</span>   <span class="token comment"># 1,2</span>

	<span class="token comment">#2.deque: 双端队列，可以快速的从另外一侧追加和推出对象</span>
<span class="token keyword">from</span> collections <span class="token keyword">import</span> deque
q<span class="token operator">=</span>deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
q<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span>
q<span class="token punctuation">.</span>appendleft<span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>   <span class="token comment"># deque(['y', 'a', 'b', 'c', 'x'])</span>

	<span class="token comment">#3.Counter: 计数器，主要用来计数</span>
c <span class="token operator">=</span> Counter<span class="token punctuation">(</span><span class="token string">'abcdeabcdabcaba'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>    <span class="token comment"># Counter({'a': 5, 'b': 4, 'c': 3, 'd': 2, 'e': 1})</span>

	<span class="token comment">#4.OrderedDict: 有序字典</span>
	<span class="token comment">#5.defaultdict: 带有默认值的字典</span>
<span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict
values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">]</span>
my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>   <span class="token comment"># 设置字典的默认值</span>
<span class="token keyword">for</span> value <span class="token keyword">in</span>  values<span class="token punctuation">:</span>
    <span class="token keyword">if</span> value<span class="token operator">&gt;</span><span class="token number">66</span><span class="token punctuation">:</span>
        my_dict<span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        my_dict<span class="token punctuation">[</span><span class="token string">'k2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_dict<span class="token punctuation">)</span>  <span class="token comment"># defaultdict(&lt;class 'list'&gt;, {'k2': [11, 22, 33, 44, 55, 66], 'k1': [77, 88, 99, 90]})   # print(list(my_dict.values()))</span>
        
<span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict
dd <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> <span class="token string">'N/A'</span><span class="token punctuation">)</span>
dd<span class="token punctuation">[</span><span class="token string">'key1'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'abc'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>dd<span class="token punctuation">[</span><span class="token string">'key1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># key1存在    'abc'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>dd<span class="token punctuation">[</span><span class="token string">'key2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># key2不存在，返回默认值   'N/A'  </span>

<span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict
dic <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>  <span class="token comment"># 如果没有给一个key赋值，就会返回一个list</span>
dic<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token string">'wang'</span>
dic<span class="token punctuation">[</span><span class="token string">'list'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>dic<span class="token punctuation">)</span>  <span class="token comment">#defaultdict(&lt;class 'list'&gt;, {'name': 'wang', 'list': [[1, 3, 4]]})</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">dict</span><span class="token punctuation">(</span>dic<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#{'name': 'wang', 'list': [[1, 3, 4]]}</span>

<span class="token comment"># dic1=dict()</span>
<span class="token comment"># print(dic1)  #{}</span>
</code></pre></div><ol><li>使用list存储数据时，按索引访问元素很快，但是插入和删除元素就很慢了，因为list是线性存储，数据量大的时候，插入和删除效率很低,deque是为了高效插入和删除</li></ol> <h2 id="decimal模块"><a href="#decimal模块" class="header-anchor">#</a> <code>decimal模块</code></h2> <p>内置的精确计算的饿模块</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> decimal
d1 <span class="token operator">=</span>decimal<span class="token punctuation">.</span>Decimal<span class="token punctuation">(</span><span class="token string">'0.1'</span><span class="token punctuation">)</span>  <span class="token comment">#注意必须是字符串</span>
d2<span class="token operator">=</span>decimal<span class="token punctuation">.</span>Decimal<span class="token punctuation">(</span><span class="token string">'0.01'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>d1<span class="token operator">*</span>d2<span class="token punctuation">)</span>  <span class="token comment">#0.001</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>decimal<span class="token punctuation">.</span>Decimal<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">#0.100000000000000005555……</span>
</code></pre></div><h2 id="time、datetime"><a href="#time、datetime" class="header-anchor">#</a> <code>time、datetime</code></h2> <p>时间模块</p> <ol><li><p>表示时间的三种方式表示时间：时间戳、元组（结构化时间）、格式化时间（字符串）：</p> <p>​	时间戳：通常来说，时间戳表示的是从1970.1.1开始的计算偏移量</p> <p>​	格式化时间字符串：‘1999-12-06‘</p> <p>​	结构化时间元组：struct_time元组共有9个元素共九个元素:(年月日时分秒，一年中第几周，一年中		第几天等）</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#时间戳</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">1500875844.800804</span>

<span class="token comment">#时间字符串</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d %X&quot;</span><span class="token punctuation">)</span>
<span class="token string">'2017-07-24 13:54:37'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d %H-%M-%S&quot;</span><span class="token punctuation">)</span>
<span class="token string">'2017-07-24 13-55-04'</span>

<span class="token comment">#时间元组:localtime将一个时间戳转换为当前时区的struct_time</span>
time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>struct_time<span class="token punctuation">(</span>tm_year<span class="token operator">=</span><span class="token number">2017</span><span class="token punctuation">,</span> tm_mon<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span> tm_mday<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">,</span>
　　　　　　　　　　tm_hour<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">,</span> tm_min<span class="token operator">=</span><span class="token number">59</span><span class="token punctuation">,</span> tm_sec<span class="token operator">=</span><span class="token number">37</span><span class="token punctuation">,</span> 
                 tm_wday<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tm_yday<span class="token operator">=</span><span class="token number">205</span><span class="token punctuation">,</span> tm_isdst<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment"># 时间戳时间-localtime/gmtime-&gt; 结构化时间 -strftime-&gt; 格式化时间</span>
<span class="token comment"># 时间戳时间&lt;-mktime- 结构化时间 &lt;-strptime- 格式化时间</span>
time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">&quot;2017-03-16&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;%Y-%m-%d&quot;</span><span class="token punctuation">)</span>  <span class="token comment">#返回一个元组结构化时间</span>
time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d&quot;</span><span class="token punctuation">,</span>time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token number">1500000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 转化为格式化时间</span>
time<span class="token punctuation">.</span>mktime<span class="token punctuation">(</span>time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token number">1500000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 结构化转时间戳</span>
time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token number">1500000000</span><span class="token punctuation">)</span>  <span class="token comment"># 时间戳转结构化</span>
</code></pre></div><p><img src="https://images2015.cnblogs.com/blog/827651/201707/827651-20170724144151992-1508626640.png" alt="img"></p></li></ol> <h2 id="random模块"><a href="#random模块" class="header-anchor">#</a> <code>random模块</code></h2> <p>随机数模块</p> <div class="language-python extra-class"><pre class="language-python"><code>random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># 大于0且小于1之间的小数</span>
random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">1</span>，<span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment"># 大于1小于3的小数</span>
random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment"># 大于1小于等于5</span>
random<span class="token punctuation">.</span>randrange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment"># 大于等于1且小于10之间的奇数</span>
random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'23'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment"># 随机返回一个</span>
random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'23'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">#随机不重复匹配2个</span>
random<span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 打乱次序,洗牌</span>
random<span class="token punctuation">.</span>choices<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'23'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'3'</span><span class="token punctuation">,</span><span class="token string">'4'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>k<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment"># 随机选3个</span>

<span class="token comment"># 验证码随机</span>
<span class="token keyword">import</span> random
<span class="token keyword">def</span> <span class="token function">make_code</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    res <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        s1 <span class="token operator">=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 生成字母chr</span>
        s2 <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        res <span class="token operator">+=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span><span class="token punctuation">[</span>s1<span class="token punctuation">,</span>s2<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> res
<span class="token keyword">print</span><span class="token punctuation">(</span>make_code<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># H53FVG8K4</span>

 <span class="token comment">#红包代码，几率相等    </span>
<span class="token keyword">import</span> random
<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>money<span class="token punctuation">,</span>pople<span class="token punctuation">)</span><span class="token punctuation">:</span>
    lst<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">]</span>  <span class="token comment"># 为了去小数，首尾</span>
    lst<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>money<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pople<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    lst<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>
    lst <span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span>lst<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 除以10</span>
    g<span class="token operator">=</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>lst<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>lst<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> g
ret<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">(</span>func<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre></div><h2 id="os模块"><a href="#os模块" class="header-anchor">#</a> <code>os模块</code></h2> <p>与操作系统交互的一个接口</p> <div class="language-python extra-class"><pre class="language-python"><code>os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span><span class="token string">'dirname1/dirname2'</span><span class="token punctuation">)</span>    <span class="token comment">#可生成多层递归目录</span>
os<span class="token punctuation">.</span>removedirs<span class="token punctuation">(</span><span class="token string">'dirname1'</span><span class="token punctuation">)</span>  <span class="token comment">#若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推</span>
os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span><span class="token string">'dirname'</span><span class="token punctuation">)</span>    <span class="token comment">#生成单级目录；相当于shell中mkdir dirname</span>
os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span><span class="token string">'dirname'</span><span class="token punctuation">)</span>  <span class="token comment">#列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印</span>
os<span class="token punctuation">.</span>rename<span class="token punctuation">(</span><span class="token string">&quot;oldname&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;newname&quot;</span><span class="token punctuation">)</span>  <span class="token comment">#重命名文件/目录</span>
os<span class="token punctuation">.</span>stat<span class="token punctuation">(</span><span class="token string">'path/filename'</span><span class="token punctuation">)</span>  <span class="token comment">#获取文件/目录信息</span>
os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">&quot;bash command&quot;</span><span class="token punctuation">)</span>  <span class="token comment">#运行shell命令，直接显示</span>
os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#获取当前工作目录，即当前python脚本工作的目录路径</span>
os<span class="token punctuation">.</span>chdir<span class="token punctuation">(</span><span class="token string">&quot;dirname&quot;</span><span class="token punctuation">)</span>  <span class="token comment">#改变当前脚本工作目录；相当于shell下cd</span>

os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>split<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  <span class="token comment">#将path分割成目录和文件名二元组返回</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token comment">#返回path的目录。其实就是os.path.split(path)的第一个元素</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token comment">#返回path最后的文件名。如何path以／或\结尾，那么就会返回空值</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  <span class="token comment">#如果path存在，返回True；如果path不存在，返回False</span>

os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isfile<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  <span class="token comment">#如果path是一个存在的文件，返回True。否则返回False</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  <span class="token comment">#如果path是一个存在的目录，则返回True。否则返回False</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>path1<span class="token punctuation">[</span><span class="token punctuation">,</span> path2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">#将多个路径组合后返回，第一个绝对路径之前的参数将被忽略</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>getsize<span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token comment">#返回path的大小</span>
</code></pre></div><h2 id="sys模块"><a href="#sys模块" class="header-anchor">#</a> <code>sys模块</code></h2> <p>是与Python解释器交互的一个接口</p> <div class="language-python extra-class"><pre class="language-python"><code>sys<span class="token punctuation">.</span>argv           <span class="token comment"># 命令行参数List，第一个元素是程序本身路径</span>
sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>n<span class="token punctuation">)</span>        <span class="token comment">#退出程序，正常退出时exit(0),错误退出sys.exit(1)</span>
sys<span class="token punctuation">.</span>version        <span class="token comment">#获取Python解释程序的版本信息</span>
sys<span class="token punctuation">.</span>path           <span class="token comment">#返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值</span>
sys<span class="token punctuation">.</span>platform       <span class="token comment">#返回操作系统平台名称</span>
</code></pre></div><ul><li><p>序列化模块： <strong>将原本的字典、列表等数据类型内容转化成一个字符串的过程</strong>。反序列化概念相反。</p> <p><img src="https://images2017.cnblogs.com/blog/827651/201708/827651-20170805234418803-1378181341.png" alt="img"></p></li></ul> <h2 id="json模块"><a href="#json模块" class="header-anchor">#</a> <code>json</code>模块</h2> <p>提供四个功能：dumps、dump、loads、load</p> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token comment">#dump和load是直接将对象序列化之后写入文件，且依赖一个文件句柄。而dumps和loads是直接在文件（内存）中进行操作，当然可以可以通过文件的‘w'模式写入。</span>
    <span class="token comment">#内存中操作</span>
    <span class="token keyword">import</span> json
    dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'k1'</span><span class="token punctuation">:</span><span class="token string">'v1'</span><span class="token punctuation">,</span><span class="token string">'k2'</span><span class="token punctuation">:</span><span class="token string">'v2'</span><span class="token punctuation">,</span><span class="token string">'k3'</span><span class="token punctuation">:</span><span class="token string">'v3'</span><span class="token punctuation">}</span>
    str_dic <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>dic<span class="token punctuation">)</span>  <span class="token comment">#序列化：将一个字典转换成一个字符串，</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>str_dic<span class="token punctuation">)</span><span class="token punctuation">,</span>str_dic<span class="token punctuation">)</span> <span class="token comment">#&lt;class 'str'&gt; {&quot;k3&quot;: &quot;v3&quot;, &quot;k1&quot;: &quot;v1&quot;, &quot;k2&quot;: &quot;v2&quot;}</span>
    
    dic2 <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>str_dic<span class="token punctuation">)</span>  <span class="token comment">#反序列化：将一个字符串格式的字典转换成一个字典</span>
    <span class="token comment">#注意，要用json的loads功能处理的字符串类型的字典中的字符串必须由&quot;&quot;表示，''都不行</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>dic2<span class="token punctuation">)</span><span class="token punctuation">,</span>dic2<span class="token punctuation">)</span>  <span class="token comment">#&lt;class 'dict'&gt; {'k1': 'v1', 'k2': 'v2', 'k3': 'v3'}</span>
    
    <span class="token comment">#文件中操作</span>
    <span class="token keyword">import</span> json
    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'json_file'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">)</span>
    dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'k1'</span><span class="token punctuation">:</span><span class="token string">'v1'</span><span class="token punctuation">,</span><span class="token string">'k2'</span><span class="token punctuation">:</span><span class="token string">'v2'</span><span class="token punctuation">,</span><span class="token string">'k3'</span><span class="token punctuation">:</span><span class="token string">'v3'</span><span class="token punctuation">}</span>
    json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>dic<span class="token punctuation">,</span>f<span class="token punctuation">)</span>  <span class="token comment">#dump方法接收一个文件句柄，直接将字典转换成json字符串写入文件</span>
    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'json_file'</span><span class="token punctuation">)</span>
    dic2 <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span>f<span class="token punctuation">)</span>  <span class="token comment">#load方法接收一个文件句柄，直接将文件中的json字符串转换成数据结构返回</span>
    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>dic2<span class="token punctuation">)</span><span class="token punctuation">,</span>dic2<span class="token punctuation">)</span> 
</code></pre></div><h2 id="pickle模块"><a href="#pickle模块" class="header-anchor">#</a> <code>pickle</code>模块</h2> <p>用于python特有的数据类型和python数据类型进行转换</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 与json模块类似 需要注意的是在写入文件的时候，要用'wb','rb'</span>
  <span class="token comment"># 内存中操作</span>
  <span class="token keyword">import</span> pickle
  dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'k1'</span><span class="token punctuation">:</span><span class="token string">'v1'</span><span class="token punctuation">,</span><span class="token string">'k2'</span><span class="token punctuation">:</span><span class="token string">'v2'</span><span class="token punctuation">,</span><span class="token string">'k3'</span><span class="token punctuation">:</span><span class="token string">'v3'</span><span class="token punctuation">}</span>
  str_dic <span class="token operator">=</span> pickle<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>dic<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>str_dic<span class="token punctuation">)</span>  <span class="token comment">#一串二进制内容</span>
  
  dic2 <span class="token operator">=</span> pickle<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>str_dic<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>dic2<span class="token punctuation">)</span>    <span class="token comment">#字典</span>
  
  <span class="token comment">#文件中操作</span>
  <span class="token keyword">import</span> time
  struct_time  <span class="token operator">=</span> time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token number">1000000000</span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>struct_time<span class="token punctuation">)</span>
  f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'pickle_file'</span><span class="token punctuation">,</span><span class="token string">'wb'</span><span class="token punctuation">)</span>
  pickle<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>struct_time<span class="token punctuation">,</span>f<span class="token punctuation">)</span>
  f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
  
  f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'pickle_file'</span><span class="token punctuation">,</span><span class="token string">'rb'</span><span class="token punctuation">)</span>
  struct_time2 <span class="token operator">=</span> pickle<span class="token punctuation">.</span>load<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>struct_time2<span class="token punctuation">.</span>tm_year<span class="token punctuation">)</span>
  
  <span class="token comment">#补充：读取多s个文件内容时，需要使用while True</span>
  <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
      <span class="token keyword">try</span><span class="token punctuation">:</span>
          obj <span class="token operator">=</span>pickle<span class="token punctuation">.</span>load<span class="token punctuation">(</span>f2<span class="token punctuation">)</span>  <span class="token comment"># 注意这个load是一个一个的加载需要用循环</span>
          li<span class="token punctuation">.</span>append<span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
      <span class="token keyword">except</span><span class="token punctuation">:</span><span class="token keyword">break</span>
   <span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">,</span><span class="token boolean">None</span><span class="token punctuation">,</span><span class="token boolean">None</span><span class="token punctuation">)</span> 
</code></pre></div><h2 id="shelve模块"><a href="#shelve模块" class="header-anchor">#</a> <code>shelve模块</code></h2> <p>是对象持久化保存，同时生成三个文件，可以把生成的对象当成字典操作。</p> <div class="language-python extra-class"><pre class="language-python"><code>  <span class="token comment">#shelve模块中的key键必须是字符串形式，value可以是任意值</span>
  <span class="token comment"># 1.创建一个shelf对象，直接使用open函数即可</span>
  <span class="token keyword">import</span> shelve
  s <span class="token operator">=</span> shelve<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test_shelf.db'</span><span class="token punctuation">)</span>         <span class="token comment">#</span>
  <span class="token keyword">try</span><span class="token punctuation">:</span>
      s<span class="token punctuation">[</span><span class="token string">'kk'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'int'</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'float'</span><span class="token punctuation">:</span> <span class="token number">9.5</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">:</span> <span class="token string">'Sample data'</span><span class="token punctuation">}</span>
      s<span class="token punctuation">[</span><span class="token string">'MM'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token keyword">finally</span><span class="token punctuation">:</span>
      s<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
  
  <span class="token comment">#2.对shelf对象，增、删、改操作</span>
  s <span class="token operator">=</span> shelve<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test_shelf.db'</span><span class="token punctuation">,</span> flag<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">,</span> writeback<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
  <span class="token keyword">try</span><span class="token punctuation">:</span>
      <span class="token comment"># 增加</span>
      s<span class="token punctuation">[</span><span class="token string">'QQQ'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2333</span>
      <span class="token comment"># 删除</span>
      <span class="token keyword">del</span> s<span class="token punctuation">[</span><span class="token string">'MM'</span><span class="token punctuation">]</span>
      <span class="token comment"># 修改</span>
      s<span class="token punctuation">[</span><span class="token string">'kk'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'String'</span><span class="token punctuation">:</span> <span class="token string">'day day up'</span><span class="token punctuation">}</span>
  <span class="token keyword">finally</span><span class="token punctuation">:</span>
      s<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>   
    
  <span class="token comment"># 3,回写</span>
  d<span class="token operator">=</span>shelve<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">r'a.txt'</span><span class="token punctuation">,</span>writeback<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment">#writeback=True，对子字典修改完后要写回，否则不会看到修改后的结果</span>
  d<span class="token punctuation">[</span><span class="token string">'egon'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'age'</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">'sex'</span><span class="token punctuation">:</span><span class="token string">'male'</span><span class="token punctuation">}</span>         <span class="token comment">#存的时候会生成三个文件，不用管，是python的一种处理机制</span>
  d<span class="token punctuation">[</span><span class="token string">'egon'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">20</span>                       <span class="token comment">#将年龄修改为20</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token string">'egon'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                   <span class="token comment">#此时拿到的是修改后的年龄</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token string">'egon'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'sex'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  d<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="hashlib模块"><a href="#hashlib模块" class="header-anchor">#</a> <code>hashlib模块</code></h2> <p>提供常见的摘要算法
1. 摘要算法： 又称哈希算法，散列算法，通过一个函数，把任意长度的数据转换为一个长度固定的数据串(通常用16进制表示)，目的是为了发现原始数据是否被人篡改过。原因是单向函数，反推很难但是现在已经有人反推成功。
2. 两种加密方式：可在md5() 中加密；还可以再update中提前加密。</p> <div class="language-python extra-class"><pre class="language-python"><code>     <span class="token keyword">import</span> hashlib 
     md5 <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 生成加密对象，这里可以加盐</span>
     md5<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'how to use md5 in python hashlib?'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">#上传加密数据</span>
     <span class="token keyword">print</span> md5<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 生成密文</span>
     
     <span class="token comment"># 如果数据量大时，比如校验视频文件时，可以多次update(),最后生成密文比较</span>
     <span class="token comment">#MD5是最常见的摘要算法，速度很快，生成结果是固定的128 bit字节，通常用一个32位的16进制字符串表示。另一种常见的摘要算法是SHA1，调用SHA1和调用MD5完全类似</span>
     
     <span class="token comment">#校验两个文件时候一致</span>
     <span class="token keyword">import</span> os
     <span class="token keyword">import</span> hashlib
     
     <span class="token keyword">def</span> <span class="token function">file_md5</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
         filesize <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>getsize<span class="token punctuation">(</span>path<span class="token punctuation">)</span>   <span class="token comment"># 先获取文件大小</span>
         md5 <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment"># 获取对象</span>
         <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
             <span class="token keyword">while</span> filesize <span class="token operator">&gt;=</span> <span class="token number">4096</span><span class="token punctuation">:</span>   <span class="token comment"># 判断大小，以便相减</span>
                 content <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">)</span>
                 md5<span class="token punctuation">.</span>update<span class="token punctuation">(</span>content<span class="token punctuation">)</span>  <span class="token comment"># 每次更新对象内容</span>
                 filesize <span class="token operator">-=</span> <span class="token number">4096</span>
             <span class="token keyword">else</span><span class="token punctuation">:</span>
                 content <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span>filesize<span class="token punctuation">)</span>
                 <span class="token keyword">if</span> content<span class="token punctuation">:</span>
                     md5<span class="token punctuation">.</span>update<span class="token punctuation">(</span>content<span class="token punctuation">)</span>
         <span class="token keyword">return</span> md5<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 生成密文</span>
     
     <span class="token keyword">def</span> <span class="token function">cmp_file</span><span class="token punctuation">(</span>path1<span class="token punctuation">,</span>path2<span class="token punctuation">)</span><span class="token punctuation">:</span>
         <span class="token keyword">return</span> file_md5<span class="token punctuation">(</span>path1<span class="token punctuation">)</span> <span class="token operator">==</span> file_md5<span class="token punctuation">(</span>path2<span class="token punctuation">)</span>
     
     path1 <span class="token operator">=</span> <span class="token string">r'D:\s20\day18\视频\4.面向对象整理.mp4'</span>
     path2 <span class="token operator">=</span> <span class="token string">r'D:\s20\day18\视频\tmp.mp4'</span>
     ret <span class="token operator">=</span> cmp_file<span class="token punctuation">(</span>path1<span class="token punctuation">,</span>path2<span class="token punctuation">)</span>
     <span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>

</code></pre></div><h2 id="logging模块"><a href="#logging模块" class="header-anchor">#</a> <code>logging模块</code></h2> <ul><li><p>用途：主要用于输出运行日志，可以设置输出日志的等级，日志保存，日志文件回滚等；相当于print，但它是标准输出，不能设置级别，影响开发者查看其他数据，可以把它理解为，设了等级才输出的print。</p></li> <li><p>logging 模块的使用：</p> <ol><li>简单配置法： 存在编码问题，但代码简单</li> <li>logger对象法： 使用方便，但配置复杂</li></ol></li> <li><p>logging的基本使用方法：</p> <ul><li>默认情况下Python的logging模块将日志打印到了标准输出中</li> <li>只显示了大于等于WARNING级别的日志，这说明默认的日志级别设置为WARNING</li> <li>日志级别等级CRITICAL &gt; ERROR &gt; WARNING &gt; INFO &gt; DEBUG</li></ul></li> <li><p><strong>函数式简单配置法</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> logging  
logging<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'debug message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'info message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'warning message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'error message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token string">'critical message'</span><span class="token punctuation">)</span> 

<span class="token comment">#配置日志等级，以及日志格式、输出位置：</span>
<span class="token keyword">import</span> logging  
logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>level<span class="token operator">=</span>logging<span class="token punctuation">.</span>DEBUG<span class="token punctuation">,</span>  
                    <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s'</span><span class="token punctuation">,</span>  
                    datefmt<span class="token operator">=</span><span class="token string">'%a, %d %b %Y %H:%M:%S'</span><span class="token punctuation">,</span>  
                    filename<span class="token operator">=</span><span class="token string">'/tmp/test.log'</span><span class="token punctuation">,</span>   <span class="token comment">#写入文件地址</span>
                    filemode<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">)</span>  
  
logging<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'debug message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'info message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'warning message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'error message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token string">'critical message'</span><span class="token punctuation">)</span>

<span class="token comment">#配置参数</span>
logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span><span class="token punctuation">)</span>函数中可通过具体参数来更改logging模块默认行为，可用参数有：

filename：用指定的文件名创建FiledHandler，这样日志会被存储在指定的文件中。
filemode：文件打开方式，在指定了filename时使用这个参数，默认值为“a”还可指定为“w”。
<span class="token builtin">format</span>：指定handler使用的日志显示格式。
datefmt：指定日期时间格式。
level：设置rootlogger（后边会讲解具体概念）的日志级别
stream：用指定的stream创建StreamHandler。可以指定输出到sys<span class="token punctuation">.</span>stderr<span class="token punctuation">,</span>sys<span class="token punctuation">.</span>stdout或者文件<span class="token punctuation">(</span>f<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span>‘test<span class="token punctuation">.</span>log’<span class="token punctuation">,</span>’w’<span class="token punctuation">)</span><span class="token punctuation">)</span>，默认为sys<span class="token punctuation">.</span>stderr。若同时列出了filename和stream两个参数，则stream参数会被忽略。

<span class="token builtin">format</span>参数中可能用到的格式化串：
    <span class="token operator">%</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>s Logger的名字
    <span class="token operator">%</span><span class="token punctuation">(</span>levelno<span class="token punctuation">)</span>s 数字形式的日志级别
    <span class="token operator">%</span><span class="token punctuation">(</span>levelname<span class="token punctuation">)</span>s 文本形式的日志级别
    <span class="token operator">%</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span>s 调用日志输出函数的模块的完整路径名，可能没有
    <span class="token operator">%</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>s 调用日志输出函数的模块的文件名
    <span class="token operator">%</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span>s 调用日志输出函数的模块名
    <span class="token operator">%</span><span class="token punctuation">(</span>funcName<span class="token punctuation">)</span>s 调用日志输出函数的函数名
    <span class="token operator">%</span><span class="token punctuation">(</span>lineno<span class="token punctuation">)</span>d 调用日志输出函数的语句所在的代码行
    <span class="token operator">%</span><span class="token punctuation">(</span>created<span class="token punctuation">)</span>f 当前时间，用UNIX标准的表示时间的浮 点数表示
    <span class="token operator">%</span><span class="token punctuation">(</span>relativeCreated<span class="token punctuation">)</span>d 输出日志信息时的，自Logger创建以 来的毫秒数
    <span class="token operator">%</span><span class="token punctuation">(</span>asctime<span class="token punctuation">)</span>s 字符串形式的当前时间默认格式是“<span class="token number">2003</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">16</span><span class="token punctuation">:</span><span class="token number">49</span><span class="token punctuation">:</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">896</span>”逗号后面的是毫秒
    <span class="token operator">%</span><span class="token punctuation">(</span>thread<span class="token punctuation">)</span>d 线程ID。可能没有
    <span class="token operator">%</span><span class="token punctuation">(</span>threadName<span class="token punctuation">)</span>s 线程名。可能没有
    <span class="token operator">%</span><span class="token punctuation">(</span>process<span class="token punctuation">)</span>d 进程ID。可能没有
    <span class="token operator">%</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>s用户输出的消息
</code></pre></div></li> <li><p><strong>logger对象配置法</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#相应组建介绍：</span>
<span class="token number">1</span>、日志器：logger，提供了应用程序可一致使用的接口
<span class="token number">2</span>、处理器<span class="token punctuation">:</span> Handler<span class="token punctuation">,</span> 将logger创建的日志记录发送到合适的目的地输出或则记录
<span class="token number">3</span>、过滤器：Filter，提供更细粒读的控制工具决定输出哪条日志记录
<span class="token number">4</span>、格式器：Formater，决定日志记录的最终输出格式
	日志器（logger）是入口，真正干活儿的是处理器（handler），处理器（handler）还可以通过过滤器（<span class="token builtin">filter</span>）和格式器（formatter）对要输出的日志内容做过滤和格式化等处理操作。
	
<span class="token comment">#方法：</span>
<span class="token number">1</span>、Logger<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 设置日志器将处理的日志消息的最低级别</span>
<span class="token number">2</span>、Logger<span class="token punctuation">.</span>addHander<span class="token punctuation">(</span><span class="token punctuation">)</span>
   Logger<span class="token punctuation">.</span>removeHander<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">#添加或删除一个hander</span>
<span class="token number">3</span>、Logger<span class="token punctuation">.</span>addFilter<span class="token punctuation">(</span><span class="token punctuation">)</span>
   Logger<span class="token punctuation">.</span>removeFilter<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">#为该logger对象添加 和 移除一个filter对象</span>
     
<span class="token comment"># 基本格式：</span>
<span class="token keyword">import</span> logging
logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># 创建个logger对象</span>
							<span class="token comment"># 创建一个handler，用于写入日志文件，文件操作符</span>
fh <span class="token operator">=</span> logging<span class="token punctuation">.</span>FileHandler<span class="token punctuation">(</span><span class="token string">'test.log'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> 
 
						<span class="token comment"># 再创建一个handler，用于输出到控制台 ，屏幕输出流，操作符</span>
ch <span class="token operator">=</span> logging<span class="token punctuation">.</span>StreamHandler<span class="token punctuation">(</span><span class="token punctuation">)</span> 
							<span class="token comment">#创建一个格式</span>
formatter <span class="token operator">=</span> logging<span class="token punctuation">.</span>Formatter<span class="token punctuation">(</span><span class="token string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span><span class="token punctuation">)</span>
 
fh<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span>logging<span class="token punctuation">.</span>DEBUG<span class="token punctuation">)</span>   <span class="token comment">#设置查看等级</span>
 
fh<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>   <span class="token comment"># 绑定文件操作符，和格式</span>
ch<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>    <span class="token comment">#绑定屏幕操作符，和格式</span>
logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>fh<span class="token punctuation">)</span>        <span class="token comment">#logger对象可以添加多个fh和ch对象 </span>
logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>ch<span class="token punctuation">)</span>     
 
logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'logger debug message'</span><span class="token punctuation">)</span> 
logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'logger info message'</span><span class="token punctuation">)</span> 
logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'logger warning message'</span><span class="token punctuation">)</span> 
logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'logger error message'</span><span class="token punctuation">)</span> 
logger<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token string">'logger critical message'</span><span class="token punctuation">)</span>

<span class="token comment">#坑点：用Python的logging模块记录日志时，可能会遇到重复记录日志的问题，第一条记录写一次，第二条记录写两次，第三条记录写三次原因：没有移除handler 解决：在日志记录完之后removeHandler，还可以使用单例模式，还可以使用模块导入的形式，因为在一个主程序中相同模块只会导入一次，所以只能初始化一次。</span>

<span class="token keyword">import</span> logging
<span class="token keyword">def</span> <span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#创建logger，如果参数为空则返回root logger</span>
    logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">&quot;nick&quot;</span><span class="token punctuation">)</span>
    logger<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span>logging<span class="token punctuation">.</span>DEBUG<span class="token punctuation">)</span>  <span class="token comment">#设置logger日志等级</span>

    <span class="token comment">#创建handler</span>
    fh <span class="token operator">=</span> logging<span class="token punctuation">.</span>FileHandler<span class="token punctuation">(</span><span class="token string">&quot;test.log&quot;</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span>
    ch <span class="token operator">=</span> logging<span class="token punctuation">.</span>StreamHandler<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">#设置输出日志格式</span>
    formatter <span class="token operator">=</span> logging<span class="token punctuation">.</span>Formatter<span class="token punctuation">(</span>
        fmt<span class="token operator">=</span><span class="token string">&quot;%(asctime)s %(name)s %(filename)s %(message)s&quot;</span><span class="token punctuation">,</span>
        datefmt<span class="token operator">=</span><span class="token string">&quot;%Y/%m/%d %X&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span>

    <span class="token comment">#为handler指定输出格式</span>
    fh<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>
    ch<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>

    <span class="token comment">#为logger添加的日志处理器</span>
    logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>fh<span class="token punctuation">)</span>
    logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>ch<span class="token punctuation">)</span>

    <span class="token comment"># 输出不同级别的log</span>
    logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>

    <span class="token comment">#解决方案1，添加removeHandler语句，每次用完之后移除Handler</span>
    logger<span class="token punctuation">.</span>removeHandler<span class="token punctuation">(</span>fh<span class="token punctuation">)</span>
    logger<span class="token punctuation">.</span>removeHandler<span class="token punctuation">(</span>ch<span class="token punctuation">)</span>

log<span class="token punctuation">(</span><span class="token string">&quot;警告&quot;</span><span class="token punctuation">)</span>
log<span class="token punctuation">(</span><span class="token string">&quot;提示&quot;</span><span class="token punctuation">)</span>
log<span class="token punctuation">(</span><span class="token string">&quot;错误&quot;</span><span class="token punctuation">)</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token comment">#添加过滤器的例子****</span>
<span class="token keyword">import</span> logging
<span class="token keyword">def</span> <span class="token function">_create_log_handlers</span><span class="token punctuation">(</span>stream<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    error_handler <span class="token operator">=</span> logging<span class="token punctuation">.</span>StreamHandler<span class="token punctuation">(</span>stream<span class="token punctuation">)</span>  <span class="token comment"># 获取logger对象</span>
    error_handler<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span>logging<span class="token punctuation">.</span>WARNING<span class="token punctuation">)</span>  <span class="token comment">#设置等级</span>
    formatter <span class="token operator">=</span> logging<span class="token punctuation">.</span>Formatter<span class="token punctuation">(</span><span class="token string">&quot;%(levelname)s: %(message)s&quot;</span><span class="token punctuation">)</span>
    error_handler<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>  <span class="token comment">#绑定格式</span>

    non_error_filter <span class="token operator">=</span> logging<span class="token punctuation">.</span>Filter<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">#实例个过滤器</span>
    non_error_filter<span class="token punctuation">.</span><span class="token builtin">filter</span> <span class="token operator">=</span> <span class="token keyword">lambda</span> record<span class="token punctuation">:</span> record<span class="token punctuation">.</span>levelno <span class="token operator">&lt;</span> logging<span class="token punctuation">.</span>WARNING <span class="token comment">#实现过滤器</span>

    non_error_handler <span class="token operator">=</span> logging<span class="token punctuation">.</span>StreamHandler<span class="token punctuation">(</span>stream<span class="token punctuation">)</span>
    non_error_handler<span class="token punctuation">.</span>addFilter<span class="token punctuation">(</span>non_error_filter<span class="token punctuation">)</span>
    formatter <span class="token operator">=</span> logging<span class="token punctuation">.</span>Formatter<span class="token punctuation">(</span><span class="token string">&quot;%(message)s&quot;</span><span class="token punctuation">)</span> <span class="token comment"># 打印错误信息</span>
    non_error_handler<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>
 
    <span class="token keyword">return</span> <span class="token punctuation">[</span>error_handler<span class="token punctuation">,</span> non_error_handler<span class="token punctuation">]</span>    <span class="token comment"># 返回两个处理器</span>
ret <span class="token operator">=</span>_create_log_handlers<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token punctuation">)</span>
    logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">#ret[0] 会报错后面两个，在ret[1]时报错前一个</span>
    logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'警告'</span><span class="token punctuation">)</span>    <span class="token comment"># 使用ret[0]调用，小于warning</span>
    logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'大于警告'</span><span class="token punctuation">)</span>  <span class="token comment"># 2019-04-04 21:52:55,654 - root - WARNING - 大于警告</span>
    logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'错误'</span><span class="token punctuation">)</span>      <span class="token comment">#2019-04-04 21:53:21,054 - root - ERROR - 错误</span>
func<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#这里的stream，只在streamHander(stream=None),这里默认是None，对应的输出对象是sys.stderr;当然可以设置为sys.stdout(标准输出，不飘红)</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token comment">#拓展</span>
<span class="token keyword">def</span> <span class="token function">_default_handlers</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">should_log</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> record<span class="token punctuation">.</span>name<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">&quot;webkitpy.thirdparty.autoinstall&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
 
    logging_filter <span class="token operator">=</span> logging<span class="token punctuation">.</span>Filter<span class="token punctuation">(</span><span class="token punctuation">)</span>
    logging_filter<span class="token punctuation">.</span><span class="token builtin">filter</span> <span class="token operator">=</span> should_log  <span class="token comment">#调用过滤器</span>
 
    handler <span class="token operator">=</span> logging<span class="token punctuation">.</span>StreamHandler<span class="token punctuation">(</span>stream<span class="token punctuation">)</span>
    formatter <span class="token operator">=</span> logging<span class="token punctuation">.</span>Formatter<span class="token punctuation">(</span><span class="token string">&quot;%(name)s: [%(levelname)s] %(message)s&quot;</span><span class="token punctuation">)</span>
    handler<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>
    handler<span class="token punctuation">.</span>addFilter<span class="token punctuation">(</span>logging_filter<span class="token punctuation">)</span>
 
    <span class="token keyword">return</span> <span class="token punctuation">[</span>handler<span class="token punctuation">]</span>  <span class="token comment">#返回一个处理器</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token comment">#终极日志（添加单例模式）</span>
<span class="token keyword">class</span> <span class="token class-name">Log</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    __instance <span class="token operator">=</span> <span class="token boolean">None</span>
    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> cls<span class="token punctuation">.</span>__instance<span class="token punctuation">:</span>
            cls<span class="token punctuation">.</span>__instance <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>__instance

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>level <span class="token operator">=</span> logging<span class="token punctuation">.</span>DEBUG<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token string">'logger'</span> <span class="token keyword">not</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>__dict__<span class="token punctuation">:</span>
            logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token punctuation">)</span>
            logger<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span>level<span class="token punctuation">)</span>
            fh <span class="token operator">=</span> logging<span class="token punctuation">.</span>FileHandler<span class="token punctuation">(</span><span class="token string">'test.log'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
            ch <span class="token operator">=</span> logging<span class="token punctuation">.</span>StreamHandler<span class="token punctuation">(</span><span class="token punctuation">)</span>
            formatter <span class="token operator">=</span> logging<span class="token punctuation">.</span>Formatter<span class="token punctuation">(</span><span class="token string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span><span class="token punctuation">)</span>
            fh<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>
            ch<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>
            logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>fh<span class="token punctuation">)</span>
            logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>logger <span class="token operator">=</span> logger

log <span class="token operator">=</span> Log<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <p>log.logger.warning('选择序号输入的内容有误')
```</p> <ul><li><p><strong>logging模块的补充</strong></p> <ul><li><p>logging模块是线程安全的，不需要客户做任何特殊的工作。它通过使用线程锁实现了这一点; 有一个锁来序列化访问模块的共享数据，每个处理程序还创建一个锁来序列化访问其底层 I/O。</p></li> <li><p>日志记录级别：</p> <p><img src="C:%5CUsers%5Cwanglixing%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1555819360479.png" alt="1555819360479"></p></li> <li><p>日志记录格式化字符串</p> <p><img src="C:%5CUsers%5Cwanglixing%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1555819431858.png" alt="1555819431858"></p></li> <li><p>使用basicConfig方法配置logging记录格式：<img src="C:%5CUsers%5Cwanglixing%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1555819463688.png" alt="1555819463688"></p></li></ul></li> <li><p>使用logging打印进程</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> threading
<span class="token keyword">import</span> logging
FORMAT <span class="token operator">=</span> <span class="token string">&quot;%(asctime)s %(thread)d %(message)s&quot;</span>
logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>level<span class="token operator">=</span>logging<span class="token punctuation">.</span>INFO<span class="token punctuation">,</span><span class="token builtin">format</span><span class="token operator">=</span>FORMAT<span class="token punctuation">)</span>
 
<span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    logging<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">&quot;{} {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>threading<span class="token punctuation">.</span><span class="token builtin">enumerate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>x<span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>
 
t <span class="token operator">=</span> threading<span class="token punctuation">.</span>Timer<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>add<span class="token punctuation">,</span>args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
t<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
运行结果：
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">15</span><span class="token punctuation">:</span><span class="token number">40</span><span class="token punctuation">:</span><span class="token number">34</span><span class="token punctuation">,</span><span class="token number">226</span> <span class="token number">123145367023616</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>_MainThread<span class="token punctuation">(</span>MainThread<span class="token punctuation">,</span> stopped <span class="token number">4320629568</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>Timer<span class="token punctuation">(</span>Thread<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> started <span class="token number">123145367023616</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token number">9</span>
</code></pre></div></li> <li><p><strong>logger类</strong>：使用工厂方法返回一个Logger实例。<code>logging.``getLogger</code>([name=None])</p> <ul><li><p>指定name，返回一个名称为name的Logger实例。如果再次使用相同的名字，是实例化一个对象。未指定name，返回Logger实例，名称是root，即根Logger。Logger是层次结构的，使用 '.' 点号分割，如'a'、'a.b'或'a.b.c.d'，'a'是'a.b'的父parent，a.b是a的子child。对于foo来说，名字为foo.bar、foo.bar.baz、foo.bam都是foo的后代。</p></li> <li><p>举例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> logging
DATEFMT <span class="token operator">=</span><span class="token string">&quot;[%Y-%m-%d %H:%M:%S]&quot;</span>
FORMAT <span class="token operator">=</span> <span class="token string">&quot;%(asctime)s %(thread)d %(message)s&quot;</span>
logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>level<span class="token operator">=</span>logging<span class="token punctuation">.</span>INFO<span class="token punctuation">,</span><span class="token builtin">format</span><span class="token operator">=</span>FORMAT<span class="token punctuation">,</span>datefmt<span class="token operator">=</span>DATEFMT<span class="token punctuation">,</span>filename<span class="token operator">=</span><span class="token string">'class_test.log'</span><span class="token punctuation">)</span>
 
root <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token builtin">type</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">,</span>root<span class="token punctuation">.</span>parent<span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token comment">#root &lt;class 'logging.RootLogger'&gt; None 4367575248</span>

logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>logger<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">(</span>logger<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">(</span>logger<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">(</span><span class="token punctuation">(</span>logger<span class="token punctuation">.</span>parent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token comment">#__main__ &lt;class 'logging.Logger'&gt; 4367575864 4367575248</span>
    
logger1 <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span>__name__ <span class="token operator">+</span> <span class="token string">&quot;.ok&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>logger1<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">(</span>logger1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">(</span>logger1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">(</span><span class="token punctuation">(</span>logger1<span class="token punctuation">.</span>parent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#__main__.ok &lt;class 'logging.Logger'&gt; 4367575920 4367575864</span>
 
<span class="token keyword">print</span><span class="token punctuation">(</span>logger1<span class="token punctuation">.</span>parent<span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>logger1<span class="token punctuation">.</span>parent<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#&lt;logging.Logger object at 0x10453eb38&gt; 4367575864</span>
</code></pre></div></li> <li><p>子child的级别设置，不影响父parent的级别：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> logging

FORMAT <span class="token operator">=</span> <span class="token string">&quot;%(asctime)s %(thread)d %(message)s&quot;</span>
logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>level<span class="token operator">=</span>logging<span class="token punctuation">.</span>WARNING<span class="token punctuation">,</span><span class="token builtin">format</span><span class="token operator">=</span>FORMAT<span class="token punctuation">,</span>datefmt<span class="token operator">=</span><span class="token string">&quot;[%Y-%m-%d %H:%M:%S]&quot;</span><span class="token punctuation">)</span>
 
root <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>root<span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#RootLogger,根Logger</span>
<span class="token comment">#1 &lt;logging.RootLogger object at 0x104534f28&gt; 4367535912</span>

root<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'my root'</span><span class="token punctuation">)</span> <span class="token comment">#低于定义的WARNING级别，所以不会记录</span>
loga <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span> <span class="token comment">#Logger继承自RootLogger</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>loga<span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>loga<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>loga<span class="token punctuation">.</span>parent<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#2 &lt;logging.Logger object at 0x1044ef630&gt; 4367250992 4367535912</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>loga<span class="token punctuation">.</span>getEffectiveLevel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#数值形式的有效级别</span>
 <span class="token comment">#3 30</span>
    
loga<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'before'</span><span class="token punctuation">)</span>
loga<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span><span class="token number">28</span><span class="token punctuation">)</span> <span class="token comment">#设置级别为28</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span>loga<span class="token punctuation">.</span>getEffectiveLevel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#4 28</span>
loga<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'after'</span><span class="token punctuation">)</span><span class="token comment">#</span>
loga<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'after1'</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>Handler:Handler控制日志信息的输出目的地，可以是控制台、文件。</p> <ul><li><p>可以单独设置level;可以单独设置格式;可以设置过滤器</p></li> <li><p>StreamHandler #不指定使用sys.strerr;FileHandler #文件;_StderrHandler #标准输出</p> <p>NullHandler #什么都不做</p></li></ul></li> <li><p>level的继承</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> logging
 
FORMAT <span class="token operator">=</span> <span class="token string">&quot;%(asctime)s %(thread)d %(message)s&quot;</span>
logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>level<span class="token operator">=</span>logging<span class="token punctuation">.</span>INFO<span class="token punctuation">,</span><span class="token builtin">format</span><span class="token operator">=</span>FORMAT<span class="token punctuation">,</span>datefmt<span class="token operator">=</span><span class="token string">&quot;[%Y-%m-%d %H:%M:%S]&quot;</span><span class="token punctuation">)</span>
 
root <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#根Logger级别为INFO 20</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'root:'</span><span class="token punctuation">,</span>root<span class="token punctuation">.</span>getEffectiveLevel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token comment">#root: 20</span>
    
log1 <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">'s'</span><span class="token punctuation">)</span>
log1<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span>logging<span class="token punctuation">.</span>ERROR<span class="token punctuation">)</span> <span class="token comment">#级别为ERROR 40</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'log1:'</span><span class="token punctuation">,</span>log1<span class="token punctuation">.</span>getEffectiveLevel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#log1: 40</span>
log1<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'log1 error'</span><span class="token punctuation">)</span>
log2 <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">'s.s1'</span><span class="token punctuation">)</span> <span class="token comment">#继承自log1 40，无法使用warning</span>
log2<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span>logging<span class="token punctuation">.</span>WARNING<span class="token punctuation">)</span> <span class="token comment">#设置为WARNING 30，才可以使用warning</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'log2:'</span><span class="token punctuation">,</span>log2<span class="token punctuation">.</span>getEffectiveLevel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#log2: 30</span>
log2<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'log2 warning'</span><span class="token punctuation">)</span>  
<span class="token comment">#logger实例，如果设置了level，就用它和信息的级别比较，否则，继承最近的祖先的level</span>
</code></pre></div><p>同样，handler也可以设置使用logging.Formatter()设置格式和Logging.Filter()设置过滤器</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> logging
 
FORMAT <span class="token operator">=</span> <span class="token string">&quot;%(asctime)s %(thread)d %(message)s&quot;</span>
logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>level<span class="token operator">=</span>logging<span class="token punctuation">.</span>INFO<span class="token punctuation">,</span><span class="token builtin">format</span><span class="token operator">=</span>FORMAT<span class="token punctuation">,</span>datefmt<span class="token operator">=</span><span class="token string">&quot;[%Y-%m-%d %H:%M:%S]&quot;</span><span class="token punctuation">)</span>
 
root <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>root<span class="token punctuation">.</span>getEffectiveLevel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#RootLogger,根Logger</span>
 
log1 <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">'s'</span><span class="token punctuation">)</span><span class="token comment">#模块化用__module__，函数化用__name__作为Logger名，Logger同名内存中也只有一个</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>log1<span class="token punctuation">.</span>getEffectiveLevel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
h1 <span class="token operator">=</span> logging<span class="token punctuation">.</span>FileHandler<span class="token punctuation">(</span><span class="token string">'test.log'</span><span class="token punctuation">)</span>
h1<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span>logging<span class="token punctuation">.</span>WARNING<span class="token punctuation">)</span>
fmt1 <span class="token operator">=</span> logging<span class="token punctuation">.</span>Formatter<span class="token punctuation">(</span><span class="token string">'[%(asctime)s] %(thread)s %(threadName)s log1-handler1 %(message)s'</span><span class="token punctuation">)</span>
h1<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>fmt1<span class="token punctuation">)</span> <span class="token comment">#重新个性化定义记录的格式化字符串</span>
log1<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>h1<span class="token punctuation">)</span>
filter1 <span class="token operator">=</span> logging<span class="token punctuation">.</span>Filter<span class="token punctuation">(</span><span class="token string">'s'</span><span class="token punctuation">)</span> <span class="token comment">#过滤器 会记录s, s.s2的信息</span>
log1<span class="token punctuation">.</span>addFilter<span class="token punctuation">(</span>filter1<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>log1<span class="token punctuation">.</span>getEffectiveLevel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
log2 <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">'s.s2'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span>log2<span class="token punctuation">.</span>getEffectiveLevel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
h2 <span class="token operator">=</span> logging<span class="token punctuation">.</span>FileHandler<span class="token punctuation">(</span><span class="token string">'test1.log'</span><span class="token punctuation">)</span>
h2<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span>logging<span class="token punctuation">.</span>WARNING<span class="token punctuation">)</span>
log1<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>h2<span class="token punctuation">)</span>
filter1 <span class="token operator">=</span> logging<span class="token punctuation">.</span>Filter<span class="token punctuation">(</span><span class="token string">'s.s2'</span><span class="token punctuation">)</span> <span class="token comment">#过滤器不会记录s.s2的消息，只会记录自己的消息</span>
log1<span class="token punctuation">.</span>addFilter<span class="token punctuation">(</span>filter1<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>log1<span class="token punctuation">.</span>getEffectiveLevel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
log1<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'log1 warning==='</span><span class="token punctuation">)</span>
log2<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'log2 warning---'</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/python/pkg/常用模块（二）.html">
        常用模块（二）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.51f2f156.js" defer></script><script src="/assets/js/2.8911ec45.js" defer></script><script src="/assets/js/102.f5b3c71d.js" defer></script>
  </body>
</html>
