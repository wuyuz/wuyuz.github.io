<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>模块层之标签、自定义标签 | 独角兕大王</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.ccac5a78.css" as="style"><link rel="preload" href="/assets/js/app.51f2f156.js" as="script"><link rel="preload" href="/assets/js/2.8911ec45.js" as="script"><link rel="preload" href="/assets/js/59.7ab7562d.js" as="script"><link rel="prefetch" href="/assets/js/10.6948c28b.js"><link rel="prefetch" href="/assets/js/100.276864ee.js"><link rel="prefetch" href="/assets/js/101.447ab1c7.js"><link rel="prefetch" href="/assets/js/102.f5b3c71d.js"><link rel="prefetch" href="/assets/js/103.16474d4b.js"><link rel="prefetch" href="/assets/js/104.ed58aef3.js"><link rel="prefetch" href="/assets/js/105.045203cd.js"><link rel="prefetch" href="/assets/js/106.be359e0b.js"><link rel="prefetch" href="/assets/js/107.7331bbca.js"><link rel="prefetch" href="/assets/js/108.76e1c800.js"><link rel="prefetch" href="/assets/js/109.e82166f3.js"><link rel="prefetch" href="/assets/js/11.d4ec37c8.js"><link rel="prefetch" href="/assets/js/110.4144755a.js"><link rel="prefetch" href="/assets/js/111.5864ab53.js"><link rel="prefetch" href="/assets/js/112.ca2aee84.js"><link rel="prefetch" href="/assets/js/113.641e7765.js"><link rel="prefetch" href="/assets/js/114.d69f8545.js"><link rel="prefetch" href="/assets/js/115.1b6a9f89.js"><link rel="prefetch" href="/assets/js/116.dde2c44e.js"><link rel="prefetch" href="/assets/js/117.4e79498c.js"><link rel="prefetch" href="/assets/js/12.7aac9c8d.js"><link rel="prefetch" href="/assets/js/13.abf127cd.js"><link rel="prefetch" href="/assets/js/14.aa4413a7.js"><link rel="prefetch" href="/assets/js/15.11a64e5b.js"><link rel="prefetch" href="/assets/js/16.f2d9a882.js"><link rel="prefetch" href="/assets/js/17.11c5bb7f.js"><link rel="prefetch" href="/assets/js/18.a522877b.js"><link rel="prefetch" href="/assets/js/19.6f31a972.js"><link rel="prefetch" href="/assets/js/20.b546c54e.js"><link rel="prefetch" href="/assets/js/21.6d055b7f.js"><link rel="prefetch" href="/assets/js/22.c48feceb.js"><link rel="prefetch" href="/assets/js/23.69941f78.js"><link rel="prefetch" href="/assets/js/24.6126dfc2.js"><link rel="prefetch" href="/assets/js/25.3475449c.js"><link rel="prefetch" href="/assets/js/26.96bb4643.js"><link rel="prefetch" href="/assets/js/27.da610e5d.js"><link rel="prefetch" href="/assets/js/28.b24ec15c.js"><link rel="prefetch" href="/assets/js/29.ec8af553.js"><link rel="prefetch" href="/assets/js/3.bec5f768.js"><link rel="prefetch" href="/assets/js/30.2e780db1.js"><link rel="prefetch" href="/assets/js/31.464c36ed.js"><link rel="prefetch" href="/assets/js/32.ad7d37c2.js"><link rel="prefetch" href="/assets/js/33.722f1ec5.js"><link rel="prefetch" href="/assets/js/34.8448d0fd.js"><link rel="prefetch" href="/assets/js/35.e5168ac9.js"><link rel="prefetch" href="/assets/js/36.edc404f1.js"><link rel="prefetch" href="/assets/js/37.5807602e.js"><link rel="prefetch" href="/assets/js/38.a519c89a.js"><link rel="prefetch" href="/assets/js/39.89af1b9a.js"><link rel="prefetch" href="/assets/js/4.5ed19beb.js"><link rel="prefetch" href="/assets/js/40.6c653db9.js"><link rel="prefetch" href="/assets/js/41.bc3b8b69.js"><link rel="prefetch" href="/assets/js/42.a0a02d9b.js"><link rel="prefetch" href="/assets/js/43.62f344e3.js"><link rel="prefetch" href="/assets/js/44.a7fd9d68.js"><link rel="prefetch" href="/assets/js/45.729c1c39.js"><link rel="prefetch" href="/assets/js/46.5b924aea.js"><link rel="prefetch" href="/assets/js/47.f3990404.js"><link rel="prefetch" href="/assets/js/48.f591f360.js"><link rel="prefetch" href="/assets/js/49.f7f213ad.js"><link rel="prefetch" href="/assets/js/5.2c5d28b5.js"><link rel="prefetch" href="/assets/js/50.b9ca2762.js"><link rel="prefetch" href="/assets/js/51.93672ee6.js"><link rel="prefetch" href="/assets/js/52.fb21314a.js"><link rel="prefetch" href="/assets/js/53.65343ccc.js"><link rel="prefetch" href="/assets/js/54.8081227d.js"><link rel="prefetch" href="/assets/js/55.e207659e.js"><link rel="prefetch" href="/assets/js/56.bde381df.js"><link rel="prefetch" href="/assets/js/57.f8eceb45.js"><link rel="prefetch" href="/assets/js/58.bef70bfd.js"><link rel="prefetch" href="/assets/js/6.fc65a1ac.js"><link rel="prefetch" href="/assets/js/60.f40ac3ca.js"><link rel="prefetch" href="/assets/js/61.d2b463ab.js"><link rel="prefetch" href="/assets/js/62.cfdf1bcf.js"><link rel="prefetch" href="/assets/js/63.1e45ce59.js"><link rel="prefetch" href="/assets/js/64.a98fe86e.js"><link rel="prefetch" href="/assets/js/65.0234d7c5.js"><link rel="prefetch" href="/assets/js/66.724906f0.js"><link rel="prefetch" href="/assets/js/67.7806fda6.js"><link rel="prefetch" href="/assets/js/68.9f227dae.js"><link rel="prefetch" href="/assets/js/69.fdbc56ac.js"><link rel="prefetch" href="/assets/js/7.284de54e.js"><link rel="prefetch" href="/assets/js/70.04a9cc03.js"><link rel="prefetch" href="/assets/js/71.a6fa1dd9.js"><link rel="prefetch" href="/assets/js/72.2f8e3aa0.js"><link rel="prefetch" href="/assets/js/73.9bbb0cb6.js"><link rel="prefetch" href="/assets/js/74.9f122255.js"><link rel="prefetch" href="/assets/js/75.75e1fbd8.js"><link rel="prefetch" href="/assets/js/76.60ff3c3e.js"><link rel="prefetch" href="/assets/js/77.39a253ae.js"><link rel="prefetch" href="/assets/js/78.0e49712f.js"><link rel="prefetch" href="/assets/js/79.5f9c24a0.js"><link rel="prefetch" href="/assets/js/8.5c21a4cc.js"><link rel="prefetch" href="/assets/js/80.f826f188.js"><link rel="prefetch" href="/assets/js/81.b8995ea7.js"><link rel="prefetch" href="/assets/js/82.e9bf63e0.js"><link rel="prefetch" href="/assets/js/83.e3a00749.js"><link rel="prefetch" href="/assets/js/84.b940927c.js"><link rel="prefetch" href="/assets/js/85.ad46a9b2.js"><link rel="prefetch" href="/assets/js/86.190e0071.js"><link rel="prefetch" href="/assets/js/87.5f9eb9ef.js"><link rel="prefetch" href="/assets/js/88.cfaf7469.js"><link rel="prefetch" href="/assets/js/89.e64cc32c.js"><link rel="prefetch" href="/assets/js/9.0723805d.js"><link rel="prefetch" href="/assets/js/90.805edabe.js"><link rel="prefetch" href="/assets/js/91.6a1ab3f7.js"><link rel="prefetch" href="/assets/js/92.04ecd01e.js"><link rel="prefetch" href="/assets/js/93.e615470a.js"><link rel="prefetch" href="/assets/js/94.0ad7c41c.js"><link rel="prefetch" href="/assets/js/95.0e5ce618.js"><link rel="prefetch" href="/assets/js/96.b59cf9f4.js"><link rel="prefetch" href="/assets/js/97.2a327746.js"><link rel="prefetch" href="/assets/js/98.9c01ec88.js"><link rel="prefetch" href="/assets/js/99.952046bd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ccac5a78.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://github.com/fluidicon.png" alt="独角兕大王" class="logo"> <span class="site-name can-hide">独角兕大王</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/python/" class="nav-link router-link-active">
  Python
</a></div><div class="nav-item"><a href="/rust/" class="nav-link">
  Rust
</a></div><div class="nav-item"><a href="/go/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/lua/" class="nav-link">
  Lua
</a></div><div class="nav-item"><a href="/C/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="https://github.com/wuyuz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/double-W/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cnblogs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/python/" class="nav-link router-link-active">
  Python
</a></div><div class="nav-item"><a href="/rust/" class="nav-link">
  Rust
</a></div><div class="nav-item"><a href="/go/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/lua/" class="nav-link">
  Lua
</a></div><div class="nav-item"><a href="/C/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="https://github.com/wuyuz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/double-W/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cnblogs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python常用模块</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Django框架</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/django/Web框架本质.html" class="sidebar-link">Web框架本质</a></li><li><a href="/python/django/resquest、模块层.html" class="sidebar-link">resquest、模块层</a></li><li><a href="/python/django/静态文件和ORM.html" class="sidebar-link">静态文件和ORM</a></li><li><a href="/python/django/标签、自定义标签.html" class="active sidebar-link">模块层之标签、自定义标签</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/django/标签、自定义标签.html#模块层之标签、自定义标签" class="sidebar-link">模块层之标签、自定义标签</a></li><li class="sidebar-sub-header"><a href="/python/django/标签、自定义标签.html#自带的标签" class="sidebar-link">自带的标签</a></li><li class="sidebar-sub-header"><a href="/python/django/标签、自定义标签.html#自定义标签" class="sidebar-link">自定义标签</a></li></ul></li><li><a href="/python/django/模版语法.html" class="sidebar-link">模版语法</a></li><li><a href="/python/django/模型层.html" class="sidebar-link">模型层</a></li><li><a href="/python/django/反向解析和视图函数.html" class="sidebar-link">反向解析和视图函数</a></li><li><a href="/python/django/单表操作.html" class="sidebar-link">单表操作</a></li><li><a href="/python/django/多表操作.html" class="sidebar-link">多表操作</a></li><li><a href="/python/django/中间件.html" class="sidebar-link">中间件</a></li><li><a href="/python/django/模型进阶.html" class="sidebar-link">模型进阶</a></li><li><a href="/python/django/缓存和信号.html" class="sidebar-link">缓存和信号</a></li><li><a href="/python/django/form组件.html" class="sidebar-link">form组件</a></li><li><a href="/python/django/csrf和Ajax.html" class="sidebar-link">csrf和Ajax</a></li><li><a href="/python/django/APIView使用和源码分析.html" class="sidebar-link">APIView使用和源码分析</a></li><li><a href="/python/django/REST framework之版本和解析器.html" class="sidebar-link">REST framework之版本和解析器</a></li><li><a href="/python/django/REST framework之分页和视图组件.html" class="sidebar-link">REST framework之分页和视图组件</a></li><li><a href="/python/django/REST framework之路由和渲染器.html" class="sidebar-link">REST framework之路由和渲染器</a></li><li><a href="/python/django/REST framework之序列化器.html" class="sidebar-link">REST framework之序列化器</a></li><li><a href="/python/django/REST framework版本图书管理系统.html" class="sidebar-link">REST framework版本图书管理系统</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flask 框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python爬虫</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python设计模式</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="模块层之标签、自定义标签"><a href="#模块层之标签、自定义标签" class="header-anchor">#</a> 模块层之标签、自定义标签</h2> <h2 id="自带的标签"><a href="#自带的标签" class="header-anchor">#</a> 自带的标签</h2> <ul><li><p>标签看起来像是这样的： <code>{% tag %}</code>。标签比变量更加复杂：一些在输出中创建文本，一些通过循环或逻辑来控制流程，一些加载其后的变量将使用到的额外信息到模版中。一些标签需要开始和结束标签 （例如{% tag %} ...标签 内容 ... {% endtag %}）。</p></li> <li><p>for 遍列每个元素：（可以是字典、列表、类对象（通过.属性查询））</p></li> <li><p><strong>遍历一个对象列表/列表嵌套的字典  (不支持break)</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#index视图函数</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
      person_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'赵丽颖'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'宋茜'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'霍思燕'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;person_list&quot;</span><span class="token punctuation">:</span> person_list<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token comment">#修改index.html</span>
<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> person <span class="token keyword">in</span> person_list <span class="token operator">%</span><span class="token punctuation">}</span>
	<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> person<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span>

</code></pre></div></li> <li><h5 id="遍历一个列表"><a href="#遍历一个列表" class="header-anchor">#</a> 遍历一个列表</h5> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#修改index视图函数</span>
  <span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
      li <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">123</span><span class="token punctuation">,</span> <span class="token number">456</span><span class="token punctuation">,</span> <span class="token number">567</span><span class="token punctuation">]</span>
      <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">:</span> li<span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token comment">#render必须传字典参数   </span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>    

<span class="token comment">#修改index.html,修改body部分</span>
  <span class="token comment">#还可以用反序 {% for obj in list reversed %}</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> item <span class="token keyword">in</span> li <span class="token operator">%</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> item <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>  <span class="token operator">//</span>标签
      <span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</code></pre></div></li> <li><p><strong>遍历一个字典</strong></p> <div class="language-html extra-class"><pre class="language-html"><code></code></pre></div></li></ul> <p>//修改index.html,(在视图函数中，只要传入一个字典就可以了，名字必须为dic)
{% for key,val in dic.items %}
</p><p>:</p>
{% endfor %}
```<p></p> <ul><li><h5 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h5> <div class="language-html extra-class"><pre class="language-html"><code>for循环,循环一个列表
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    {% for name in name_list reversed %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>{{ forloop.counter }}  {{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    {% endfor %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
循环一个字典
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">&gt;</span></span>
    {% for key,value in name_dict.items %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span> {{ forloop.counter0 }} {{ key }}  ---  {{ value }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    {% endfor %}

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">&gt;</span></span>
不支持break等操作
if判断 结合过滤器的写法
    {% if num|xxx:20 &gt; 2000 %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>大于2千<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    {% else %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>小于等于2千<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    {% endif %}
</code></pre></div></li> <li><p><strong>注意</strong>：Django的模板语言中属性的优先级大于方法（了解）</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">xx</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;items&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">}</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&quot;xx.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> d<span class="token punctuation">}</span><span class="token punctuation">)</span>
    
<span class="token comment">#如上，我们在使用render方法渲染一个页面的时候，传的字典d有一个key是items并且还有默认的 d.items() 方法，此时在模板语言中:    </span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> data<span class="token punctuation">.</span>items <span class="token punctuation">}</span><span class="token punctuation">}</span>   <span class="token comment">#默认会取d的items key的值。</span>
</code></pre></div></li> <li><p><strong>总结Django的标签：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>1、if 标签   # 判断标签
2、for 标签  # 循环标签
3、with 标签  # 起别名标签
4、crsf_token 标签  # 防止跨站请求伪造
</code></pre></div></li></ul> <h5 id="自定义过滤器"><a href="#自定义过滤器" class="header-anchor">#</a> 自定义过滤器</h5> <ul><li><p><strong>举例</strong>：添加一个乘法过滤器</p> <p><strong>第一步</strong>：</p> <div class="language- extra-class"><pre class="language-text"><code>1、修改settings.py中的INSTALLED_APPS，最后一行添加当前的app。不然找不到app下面的模块。
2、在app项目目录下新建一个templatetags目录（目录必须是这个，否则找不到）
3、在新建的templatetags目录下新建一个my_filter_tag.py(这个可以随便起，最好不要使用'_')
4、自定义过滤器的第一个参数可以是变量/参数，第二个参数必须是参数，不能是变量
</code></pre></div><p>对my_filter_tag.py 进行修改，内容如下</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django <span class="token keyword">import</span> template
<span class="token keyword">from</span> django<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>safestring <span class="token keyword">import</span> mark_safe  <span class="token comment"># 这个相当于django自带的safe,因为自定义的标签不能使用自带的safe，只能用他</span>
register<span class="token operator">=</span>template<span class="token punctuation">.</span>Library<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">#导入模块注册表</span>

<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span>  <span class="token comment">#增加@register.filter，是为了将函数转换成过滤器。函数的名字，可以自定义</span>
<span class="token keyword">def</span> <span class="token function">multi_filter</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">#过滤器的函数默认接受两个参数</span>
    <span class="token keyword">return</span> x<span class="token operator">*</span>y

<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span><span class="token punctuation">(</span>name<span class="token operator">=</span>multi<span class="token punctuation">)</span>  <span class="token comment"># 重命名，以后使用就用它multi</span>
<span class="token keyword">def</span> <span class="token function">multi_filter</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> x<span class="token operator">*</span>y
</code></pre></div><h5 id="第二步"><a href="#第二步" class="header-anchor">#</a> 第二步：</h5> <p>在响应使用自定义过滤器的html文件中，开始就应该导入</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#要过滤的html</span>
<span class="token punctuation">{</span><span class="token operator">%</span> load my_filter_tag <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token operator">//</span>其实类似于加载导入，p标签中的内容，是执行了multi_filter过滤器。
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> num<span class="token operator">|</span>multi_filter<span class="token punctuation">:</span><span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token comment">#views.py文件</span>
<span class="token keyword">def</span> <span class="token function">index1</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    num <span class="token operator">=</span> <span class="token number">100</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'login.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'num'</span><span class="token punctuation">:</span> num<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token comment">#url.py文件</span>
urlpatterns <span class="token operator">=</span><span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^app/index/$'</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>index1<span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
</code></pre></div><p>注意：其实此时  就是在执行multi_filter过滤器，且默认此函数接受两个参数，<strong>第一个：num（即要被过滤的对象）；第二个：5（即要用于参与处理的参数）</strong>。（这里的num、5相对于函数x，y).   <strong>重启项目即可</strong></p> <h5 id="注意"><a href="#注意" class="header-anchor">#</a> 注意：</h5> <div class="language- extra-class"><pre class="language-text"><code>如果要完成3位乘法呢？过滤器可以增加一个形参，但是index.html怎么加第3个参数呢？

答：是，它不能加第3个参数。所以只能在后端，将参数形式修改列表，元组，字典等方式，就可以了。
比如：第二个参数，可以传入字符串，然后进行切割，然后再返回。
</code></pre></div></li> <li><p><strong>举例</strong>：计算4*5*6</p> <p>修改index视图函数</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    num1 <span class="token operator">=</span> <span class="token number">4</span>
    num2 <span class="token operator">=</span> <span class="token number">5</span>
    num3 <span class="token operator">=</span> <span class="token number">6</span>
    num_list <span class="token operator">=</span> <span class="token punctuation">[</span>num1<span class="token punctuation">,</span>num2<span class="token punctuation">,</span>num3<span class="token punctuation">]</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span><span class="token string">'index.html'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">'num_list'</span><span class="token punctuation">:</span>num_list<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>修改my_filter_tag.py 中的过滤器</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span>
<span class="token keyword">def</span> <span class="token function">multi_filter</span><span class="token punctuation">(</span>num_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
    res <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> num_list<span class="token punctuation">:</span>
        res<span class="token operator">*=</span>i
    <span class="token keyword">return</span> res
</code></pre></div><p>修改index.html, 修改body部分</p> <div class="language-hmtl extra-class"><pre class="language-text"><code>{% load my_filter_tag %}
&lt;p&gt;{{ num_list|multi_filter }}&lt;/p&gt;   //默认multi_filter前的num作为第一个参数传入，要是后面有:传入的是第二个参数
</code></pre></div></li> <li><p><strong>举例:</strong> 通过过滤器返回html标签，按照原来的写法只会返回一个文本（存在的问题：因为防止XSS攻击）</p> <p>因为django遇到html或者js标签，会转义。它认为是不安全的！那么如何告诉它，是安全的呢？</p> <div class="language- extra-class"><pre class="language-text"><code>需要在过滤器中导入make_safe模块
</code></pre></div><p>修改my_filter_tag.py文件中的link_tag过滤器，完整代码如下：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#使用make_safe方法，告诉django是安全的，不需要转义</span>
<span class="token keyword">from</span> django <span class="token keyword">import</span> template
<span class="token keyword">from</span> django<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>safestring <span class="token keyword">import</span> mark_safe
register<span class="token operator">=</span>template<span class="token punctuation">.</span>Library<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span>
<span class="token keyword">def</span> <span class="token function">multi_filter</span><span class="token punctuation">(</span>num_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
    res <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> num_list<span class="token punctuation">:</span>
        res<span class="token operator">*=</span>i
    <span class="token keyword">return</span> res

<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span>
<span class="token keyword">def</span> <span class="token function">link_tag</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> mark_safe<span class="token punctuation">(</span><span class="token string">&quot;&lt;a href=%s&gt;click&lt;/a&gt;&quot;</span> <span class="token operator">%</span> href<span class="token punctuation">)</span>  <span class="token comment">#告诉浏览器这个标签安全</span>
</code></pre></div><p>修改index.html</p> <div class="language-html extra-class"><pre class="language-html"><code>{% load my_filter_tag %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ link|link_tag }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>重启django项目，因为网页有缓存，懒得清理了</p></li></ul> <h2 id="自定义标签"><a href="#自定义标签" class="header-anchor">#</a> 自定义标签</h2> <ul><li><p><strong>标签</strong>:是为了做一些功能，把标签当作函数使用</p> <div class="language- extra-class"><pre class="language-text"><code>调用标签，使用的方法：{% 标签过滤器名 参数1，参数2，参数3... %}
参数不限,但不能放在if for语句中
</code></pre></div><p>修改my_filter_tag.py,增加multi_tag函数</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>simple_tag</span>   <span class="token comment">#表示将函数转换为自定义标签</span>
<span class="token keyword">def</span> <span class="token function">multi_tag</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> x<span class="token operator">*</span>y<span class="token operator">*</span>z

<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>simple_tag</span>
<span class="token keyword">def</span> <span class="token function">join_str</span><span class="token punctuation">(</span><span class="token operator">*</span>arg<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">#要求传入的参数是（位置参数，关键字参数）</span>
    <span class="token keyword">return</span> <span class="token string">'xxx'</span>  
</code></pre></div><p>修改index.html,修改body部分</p> <div class="language-html extra-class"><pre class="language-html"><code>{% load my_filter_tag %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{% multi_tag 7 8 9 %}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  //传递参数
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{% join_str 7 8 9 k1=3 k2=4%}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  //多种参数
</code></pre></div></li> <li><p>总结：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token number">1</span>、自定义标签和自定义过滤器的区别：
    <span class="token number">1</span><span class="token punctuation">.</span> 标签，是为了做一些功能。过滤器，是对斜杠前面的数据做过滤。
    <span class="token number">2</span><span class="token punctuation">.</span> 标签可以写任意个形参，而过滤器最大只能写<span class="token number">2</span>个形参。如果过滤器需要接收多个参数，需要将参数存放在列表，元组，字典等数据中。
    <span class="token number">3</span><span class="token punctuation">.</span> 过滤器可以用在<span class="token keyword">if</span>等语句后，标签不可以


<span class="token comment">#综合案例：</span>
<span class="token comment">#自定义模块文件my_tags.py中</span>
<span class="token keyword">from</span> django <span class="token keyword">import</span> template
<span class="token keyword">from</span> django<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>safestring <span class="token keyword">import</span> mark_safe 
register <span class="token operator">=</span> template<span class="token punctuation">.</span>Library<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">#register的名字是固定的,不可改变</span>
 
<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span>
<span class="token keyword">def</span> <span class="token function">filter_multi</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span>  v1 <span class="token operator">*</span> v2

<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>simple_tag</span>  <span class="token comment">#和自定义filter类似，只不过接收更灵活的参数，没有个数限制。</span>
<span class="token keyword">def</span> <span class="token function">simple_tag_multi</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">return</span>  v1 <span class="token operator">*</span> v2

<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>simple_tag</span>
<span class="token keyword">def</span> <span class="token function">my_input</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">,</span>arg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> <span class="token string">&quot;&lt;input type='text' id='%s' class='%s' /&gt;&quot;</span> <span class="token operator">%</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">,</span>arg<span class="token punctuation">,</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> mark_safe<span class="token punctuation">(</span>result<span class="token punctuation">)</span>

<span class="token comment"># 在使用自定义simple_tag和filter的html文件中导入之前创建的 my_tags.py</span>
<span class="token punctuation">{</span><span class="token operator">%</span> load my_tags <span class="token operator">%</span><span class="token punctuation">}</span>

<span class="token comment"># 使用simple_tag和filter（如何调用）</span>
<span class="token punctuation">{</span><span class="token operator">%</span> load xxx <span class="token operator">%</span><span class="token punctuation">}</span>  

    <span class="token comment"># num=12 假如这里再视图函数中传入了num=12</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> num<span class="token operator">|</span>filter_multi<span class="token punctuation">:</span><span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment"># 24</span>

    <span class="token punctuation">{</span><span class="token punctuation">{</span> num<span class="token operator">|</span>filter_multi<span class="token punctuation">:</span><span class="token string">&quot;[22,333,4444]&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>

    <span class="token punctuation">{</span><span class="token operator">%</span> simple_tag_multi <span class="token number">2</span> <span class="token number">5</span> <span class="token operator">%</span><span class="token punctuation">}</span>  参数不限<span class="token punctuation">,</span>但不能放在<span class="token keyword">if</span> <span class="token keyword">for</span>语句中
    <span class="token punctuation">{</span><span class="token operator">%</span> simple_tag_multi num <span class="token number">5</span> <span class="token operator">%</span><span class="token punctuation">}</span>

<span class="token comment">#注意：filter可以用在if、for等语句后，simple_tag不可以，也就是说自定义不可以使用这些</span>
<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> num<span class="token operator">|</span>filter_multi<span class="token punctuation">:</span><span class="token number">30</span> <span class="token operator">&gt;</span> <span class="token number">100</span> <span class="token operator">%</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> num<span class="token operator">|</span>filter_multi<span class="token punctuation">:</span><span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>
</code></pre></div></li></ul> <p><strong>inclusion_tag</strong>: 区别于组件，<strong>此方法使某个部件可以动态更换效果</strong>，如：分页</p> <ul><li><p><strong>多用于返回html代码片段</strong>：其实是一个函数标签，可以将加载数据传给装饰器的html文件，然后将渲染后的html文件当作组件返回给加载对象(这个装饰器，register.inslusion_tag会将渲染好的html文件返回给调用者)</p> <p><strong>第一步</strong>：通过视图函数返回数据给装饰器函数，以便渲染；第二步：通过装饰器函数的html进行渲染；第三步：返回渲染好的html片段，插入到最终的html代码中。（其实就是返回了个组件）</p> <p>在templatetags/my_inclusion.py中 （过滤器需要触发的标签）</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django <span class="token keyword">import</span> template   <span class="token comment"># 可以写成 from django.template import Library</span>
register <span class="token operator">=</span> template<span class="token punctuation">.</span>Library<span class="token punctuation">(</span><span class="token punctuation">)</span> 

<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>inclusion_tag</span><span class="token punctuation">(</span><span class="token string">'result.html'</span><span class="token punctuation">)</span>  <span class="token comment">#将result.html里面的内容用下面函数的返回值渲染，然后作为一个组件一样，加载到使用这个函数的html文件里面</span>
<span class="token keyword">def</span> <span class="token function">show_results</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#参数可以传多个进来</span>
    n <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token keyword">else</span> <span class="token builtin">int</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;第{}项&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> data<span class="token punctuation">}</span>    <span class="token comment">#这里可以穿多个值，和render的感觉是一样的{'data1':data1,'data2':data2....}</span>
</code></pre></div><p><strong>第二步</strong>：在templates/snippets/result.html （函数提交数据进行渲染的html，其实就是返回了一个组件给调用标签的位置）</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  {% for choice in data %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>{{ choice }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  {% endfor %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在templates/index.html中（调用标签的html)</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x-ua-compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>inclusion_tag test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

{% load my_include %}  // 先加载自定义文件名

{% show_results 10 %}   //调用函数返回组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>总结：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">{</span><span class="token operator">%</span> load 函数名 <span class="token operator">%</span><span class="token punctuation">}</span>   <span class="token comment">#用于加载视图函数</span>
<span class="token punctuation">{</span><span class="token operator">%</span> extend <span class="token string">'xxx.html'</span> <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token comment">#用于加载模块</span>
<span class="token punctuation">{</span><span class="token operator">%</span> include <span class="token string">'xxx.html'</span> <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token comment">#用于加载组件文件</span>
</code></pre></div></li></ul> <h4 id="练习"><a href="#练习" class="header-anchor">#</a> 练习:</h4> <p>1、使用过滤器完成加减乘除的操作：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">{</span><span class="token punctuation">{</span>a<span class="token operator">|</span>add<span class="token punctuation">:</span>b<span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token comment">#加法、减法可以将b传入负数，但是不能-b</span>

<span class="token comment">#乘法</span>
<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span>
<span class="token keyword">def</span> <span class="token function">multiy</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> x<span class="token operator">*</span>y

<span class="token punctuation">{</span><span class="token punctuation">{</span>a<span class="token operator">|</span>multiy<span class="token punctuation">:</span>b<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token comment">#给一个网站和文字，使它能是一个可以跳转的标签</span>
<span class="token comment">#法一：</span>
<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span>
<span class="token keyword">def</span> <span class="token function">show_a</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token string">'&lt;a href=&quot;{}&quot;&gt;{}&lt;/a&gt;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
 
<span class="token punctuation">{</span><span class="token punctuation">{</span>a<span class="token operator">|</span>show_a<span class="token punctuation">:</span><span class="token string">'百度'</span><span class="token operator">|</span>safe<span class="token punctuation">}</span><span class="token punctuation">}</span> 
</code></pre></div><p>2、<strong>面试题</strong>：模块中使用{% sqr_list 3 %},生成如下dropdown list控件（下拉菜单）</p> <div class="language-python extra-class"><pre class="language-python"><code> <span class="token comment"># 在 templatetags/my_tag.py文件中</span>
<span class="token keyword">from</span> django <span class="token keyword">import</span> template
register <span class="token operator">=</span> template<span class="token punctuation">.</span>Library<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>inclusion_tag</span><span class="token punctuation">(</span><span class="token string">'result.html'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">show_a</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> num <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        dic<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>num<span class="token operator">*</span>num<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'data'</span><span class="token punctuation">:</span>dic<span class="token punctuation">}</span> 
    
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
 <span class="token comment">#result.html文件中</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;dropdown&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button <span class="token builtin">id</span><span class="token operator">=</span><span class="token string">&quot;dLabel&quot;</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;button&quot;</span> data<span class="token operator">-</span>toggle<span class="token operator">=</span><span class="token string">&quot;dropdown&quot;</span> aria<span class="token operator">-</span>haspopup<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> aria<span class="token operator">-</span>expanded<span class="token operator">=</span><span class="token string">&quot;false&quot;</span><span class="token operator">&gt;</span>
    Dropdown trigger
    <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;caret&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ul <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;dropdown-menu&quot;</span> aria<span class="token operator">-</span>labelledby<span class="token operator">=</span><span class="token string">&quot;dLabel&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span> key<span class="token operator">&amp;</span>nbsp<span class="token operator">&amp;</span>nbsp<span class="token operator">&amp;</span>nbsp<span class="token operator">&amp;</span>nbsptext<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> key<span class="token punctuation">,</span>values <span class="token keyword">in</span> data<span class="token punctuation">.</span>items <span class="token operator">%</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> key <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&amp;</span>nbsp<span class="token operator">&amp;</span>nbsp<span class="token operator">&amp;</span>nbsp<span class="token operator">&amp;</span>nbsp<span class="token operator">&amp;</span>nbsp<span class="token punctuation">{</span><span class="token punctuation">{</span> key <span class="token punctuation">}</span><span class="token punctuation">}</span>的平方是<span class="token punctuation">{</span><span class="token punctuation">{</span> values <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token comment"># views.py文件中</span>
<span class="token keyword">def</span> <span class="token function">show_a</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span><span class="token string">'base.html'</span><span class="token punctuation">)</span>
    
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token comment">#base.html文件中</span>
<span class="token operator">&lt;</span>!DOCTYPE html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Title<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token operator">%</span> load static <span class="token operator">%</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">&quot;stylesheet&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;{% get_static_prefix %}bootstrap-3.3.7-dist/css/bootstrap.min.css&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token operator">%</span> load my_tags <span class="token operator">%</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token operator">%</span> show_a <span class="token number">10</span> <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;{% get_static_prefix %}js/jquery-3.4.1.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;{% get_static_prefix %}bootstrap-3.3.7-dist/js/bootstrap.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/python/django/静态文件和ORM.html" class="prev">
        静态文件和ORM
      </a></span> <span class="next"><a href="/python/django/模版语法.html">
        模版语法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.51f2f156.js" defer></script><script src="/assets/js/2.8911ec45.js" defer></script><script src="/assets/js/59.7ab7562d.js" defer></script>
  </body>
</html>
